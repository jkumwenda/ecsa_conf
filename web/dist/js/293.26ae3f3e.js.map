{"version":3,"file":"js/293.26ae3f3e.js","mappings":"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","sources":["webpack://ecsaconm-event/./src/views/auth/Login.vue","webpack://ecsaconm-event/./src/services/authService.js","webpack://ecsaconm-event/./src/views/auth/Login.vue?930c"],"sourcesContent":["<template>\n    <div class=\"sm:flex sm:flex-row flex flex-col flex-1 justify-center items-center\">\n        <div class=\"sm:w-7/12 w-11/12  flex flex-col sm:space-y-4 space-y-2 rounded-md p-8 bg-ghost-300\">\n            <div class=\"sm:font-roboto-thin font-roboto text-ghost-900 sm:text-4xl text-xl\">Sign in</div>\n            <div v-if=\"message\" class=\"text-flamingo-500\">{{ message }}</div> <!-- Display error message -->\n            <SpinnerComponent v-if=\"isLoading\" />\n            <form v-else class=\"flex flex-col space-y-4\" @submit.prevent=\"submitLoginForm\" method=\"POST\">\n                <label class=\"block\">\n                    <input type=\"email\" name=\"email\" v-model=\"userData.username\"\n                        class=\"mt-2 px-4 py-3 bg-white border shadow-sm border-ghost-600 placeholder-slate-400 focus:outline-none focus:border-athens-gray-500 focus:border-athens-gray-500 block w-full rounded-md sm:text-sm focus:ring-1\"\n                        placeholder=\"Email\" required />\n                </label>\n                <label class=\"block\">\n                    <input type=\"password\" name=\"password\" v-model=\"userData.password\"\n                        class=\"mt-2 px-4 py-3 bg-white border shadow-sm border-ghost-600 placeholder-slate-400 focus:outline-none focus:border-athens-gray-500 focus:border-athens-gray-500 block w-full rounded-md sm:text-sm focus:ring-1\"\n                        placeholder=\"Password\" required />\n                </label>\n                <div class=\"flex sm:flex-row flex-col sm:space-x-4 space-y-2\">\n                    <button type=\"submit\"\n                        class=\"flex-1 px-4 py-3 text-white-50 rounded-md bg-bondi-blue text-stone-100 hover:bg-bondi-blue-600\">\n                        Sign in\n                    </button>\n                </div>\n                <div class=\"flex flex-row sm:space-x-4 justify-center items-center\">\n                    <router-link :to=\"{ name: 'ResetPassword' }\"\n                        class=\"cursor-poiter text-bondi-blue-500 cursor-pointer\">\n                        Forgot your password?\n                    </router-link>\n                </div>\n                <div class=\"flex sm:flex-row flex-col sm:space-x-4 space-y-2 justify-center items-center\">\n                    <p class=\"\">\n                        New to this website <router-link :to=\"{ name: 'Register' }\"\n                            class=\"cursor-poiter text-bondi-blue-500 cursor-pointer\">Register</router-link>\n                    </p>\n                </div>\n            </form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { login } from \"@/services/authService\";\nimport SpinnerComponent from \"@/components/Spinner.vue\";\nimport router from \"@/router\";\nimport { useAuthStore } from \"@/store/authStore\";\nimport { setAuthToken } from \"@/services/apiService\"; // Adjust the path as needed\n\n\nexport default {\n    name: \"LoginView\",\n    components: {\n        SpinnerComponent\n    },\n    data() {\n        return {\n            userData: {\n                username: \"\",\n                password: \"\",\n            },\n            SpinnerComponent,\n            message: null,\n            isLoading: false,\n        };\n    },\n\n    methods: {\n        async submitLoginForm() {\n            this.isLoading = true;\n            try {\n                const response = await login(\"auth/login\", this.userData);\n                // saveTokenToLocalStorage(response.access_token);\n                const authStore = useAuthStore();\n                authStore.setUser(response.user);\n                authStore.setPermissions(response.permissions);\n                authStore.setAccessToken(response.access_token);\n                setAuthToken();\n\n                this.isLoading = false;\n\n                this.$nextTick(() => {\n                    router.push(\"/dashboard\");\n                });\n            } catch (error) {\n                this.message = \"Invalid username or password!\"; // Set the error message\n                this.isLoading = false;\n            }\n        },\n    },\n};\n</script>","import axios from \"axios\";\n\nconst instance = axios.create({\n  baseURL: process.env.VUE_APP_API_URL,\n});\n\n// Function to save the token in local storage\nexport function saveTokenToLocalStorage(token) {\n  localStorage.setItem(\"authToken\", token);\n}\n\n// Function to remove the token from local storage\nfunction removeTokenFromLocalStorage() {\n  localStorage.removeItem(\"authToken\");\n}\n\n// Function to perform user login\n// Function to perform user login\nexport const login = async (url, userData) => {\n  try {\n    const params = new URLSearchParams();\n    params.append(\"grant_type\", \"\");\n    params.append(\"username\", userData.username);\n    params.append(\"password\", userData.password);\n    params.append(\"scope\", \"\");\n    params.append(\"client_id\", \"\");\n    params.append(\"client_secret\", \"\");\n\n    const response = await instance.post(url, params, {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    // Handle error, e.g., log it or throw a custom error\n    console.error(\"Login error:\", error);\n    throw error;\n  }\n};\n\n// Function to perform user logout\nexport function logout() {\n  removeTokenFromLocalStorage();\n}\n\n// Function to refresh the authentication token (placeholder, replace with actual logic)\nexport async function refreshToken() {\n  try {\n    const response = await instance.post(\"/refresh-token-endpoint\");\n    const { token } = response.data;\n    saveTokenToLocalStorage(token);\n    return token;\n  } catch (error) {\n    // Handle error, e.g., log it or throw a custom error\n    console.error(\"Refresh token error:\", error);\n    throw error;\n  }\n}\n\nexport default instance;\n","import { render } from \"./Login.vue?vue&type=template&id=5b4e2f46\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","key","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","$data","message","_hoisted_4","_toDisplayString","_createCommentVNode","isLoading","_createBlock","_component_SpinnerComponent","onSubmit","_cache","_withModifiers","args","$options","submitLoginForm","method","_hoisted_5","name","$event","userData","username","placeholder","required","_hoisted_6","password","_hoisted_7","_hoisted_8","_createVNode","_component_router_link","to","default","_withCtx","_createTextVNode","_","_hoisted_9","_hoisted_10","instance","axios","create","baseURL","process","login","async","url","params","URLSearchParams","append","response","post","headers","data","error","console","components","SpinnerComponent","methods","this","authStore","useAuthStore","setUser","user","setPermissions","permissions","setAccessToken","access_token","setAuthToken","$nextTick","router","push","__exports__","render"],"sourceRoot":""}