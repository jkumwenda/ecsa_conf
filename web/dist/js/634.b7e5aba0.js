"use strict";(self["webpackChunkecsaconm_event"]=self["webpackChunkecsaconm_event"]||[]).push([[634],{7634:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var s=n(641),a=n(33),i=n(3751);const r={class:"flex flex-col space-y-6 flex-1 items-center"},o={key:1,class:"flex flex-col w-11/12 justify-center items-center space-y-4"},l={class:"flex flex-row sm:w-10/12 w-full border-2 border-abbey-500 rounded-xl text-center py-2"},c={class:"flex flex-col w-full space-y-2"},d={class:"font-roboto-light text-xl p-4"},u=(0,s.Lk)("h1",{class:"px-4 py-2 bg-bondi-blue-500 font-bold text-white-100"},"User details",-1),m={class:"flex flex-col"},p=(0,s.Lk)("h1",{class:"px-4 py-2 bg-abbey-500 font-bold text-white-100"},"Payment Status",-1),v={class:"flex flex-col"},f={key:0,class:"font-bold text-mountain-meadow-800"},y={key:1,class:"flex flex-col px-4 items-center justify-center"},h=(0,s.Lk)("span",{class:"italic text-bondi-blue-700 font-bold"},"Not paid",-1),b={key:0,class:"px-1 italic text-sm text-bondi-blue"},x=(0,s.Lk)("span",{class:"text-sm font-bold"},"Enter key to confirm payment",-1),k=(0,s.Lk)("button",{type:"submit",class:"mt-2 px-4 py-1 text-sm text-white-100 bg-bondi-blue hover:bg-bondi-blue-400 rounded-md"}," Confirm Payment ",-1),g=(0,s.Lk)("h1",{class:"px-4 py-2 bg-abbey-200 font-bold text-white-100"},"Attendance Register",-1),L={class:"flex flex-col pb-4"},E={key:0,class:"flex flex-col items-center"},w={key:1,class:"italic text-sm"},C=(0,s.Lk)("div",null,null,-1);function _(e,t,n,_,I,D){const X=(0,s.g2)("SpinnerComponent"),U=(0,s.g2)("CheckCircleIcon");return(0,s.uX)(),(0,s.CE)("div",r,[I.isLoading?((0,s.uX)(),(0,s.Wv)(X,{key:0})):((0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",l,[(0,s.Lk)("div",c,[(0,s.Lk)("div",d,(0,a.v_)(I.userEvent.event),1),u,(0,s.Lk)("div",m,[(0,s.Lk)("span",null,(0,a.v_)(I.userEvent.title)+" "+(0,a.v_)(I.userEvent.firstname)+" "+(0,a.v_)(I.userEvent.lastname),1),(0,s.Lk)("span",null,(0,a.v_)(I.userEvent.email),1),(0,s.Lk)("span",null,(0,a.v_)(I.userEvent.institution),1),(0,s.Lk)("span",null,(0,a.v_)(I.userEvent.participant_country),1),(0,s.Lk)("span",null,(0,a.v_)(I.userEvent.participant_category),1)]),p,(0,s.Lk)("div",v,[I.userEvent.event_payment?((0,s.uX)(),(0,s.CE)("span",f,"Paid")):((0,s.uX)(),(0,s.CE)("div",y,[h,I.message?((0,s.uX)(),(0,s.CE)("div",b,(0,a.v_)(I.message),1)):(0,s.Q3)("",!0),(0,s.Lk)("form",{onSubmit:t[1]||(t[1]=(0,i.D$)(((...e)=>D.confirmPayment&&D.confirmPayment(...e)),["prevent"])),method:"POST",class:"sm:w-12/12 bg-bondi-blue-100 border-2 border-abbey-400 p-2 px-6 rounded-xl my-4"},[x,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>I.paymentConfirmData.private_key=e),class:"mt-2 px-2 py-2 bg-white border border-1 shadow-sm border-abbey-400 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1",placeholder:"Private key"},null,512),[[i.Jo,I.paymentConfirmData.private_key]]),k],32)]))]),g,(0,s.Lk)("div",L,[I.attendances.length>0?((0,s.uX)(),(0,s.CE)("div",E,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(I.attendances,(e=>((0,s.uX)(),(0,s.CE)("span",{key:e.id,class:"flex flex-row space-x-2"},[(0,s.Lk)("span",null,(0,a.v_)(D.formatDate(e.date)),1),(0,s.bF)(U,{class:"w-5 h-5 text-mountain-meadow-800 cursor-pointer"})])))),128))])):((0,s.uX)(),(0,s.CE)("div",w,"Not attendance registered yet"))])])]),C]))])}var I=n(133),D=n(3069),X=n(2521),U={name:"UserEventStatusView",components:{SpinnerComponent:X.A,CheckCircleIcon:D.A},data(){return{headerTitle:"User Event Status",userId:this.$route.params.userId,eventId:this.$route.params.eventId,userEvent:"",attendances:{},appUrl:"https://events.ecsaconm.org",apiUrl:"https://185.135.137.170:8080",isLoading:!0,paymentConfirmData:{private_key:"",event_id:"",user_id:""},message:null}},mounted(){this.getUserEvent()},methods:{async getUserEvent(){this.message=null;try{const e=await(0,I.mI)("events","user","event",this.userId,this.eventId);this.userEvent=e.user_event,this.attendances=e.attendance,this.isLoading=!1}catch(e){console.error("Error fetching user event:",e),this.isLoading=!1}},async confirmPayment(){if(this.paymentConfirmData.event_id=this.eventId,this.paymentConfirmData.user_id=this.userId,202409==this.paymentConfirmData.private_key){this.isLoading=!0;try{const e=await(0,I.wE)("events/confirm_event_payment/",this.paymentConfirmData);this.events=e.data,this.isLoading=!1,this.getUserEvent()}catch(e){console.error("Error fetching event payment:",e),this.isLoading=!1}}this.message="Invalid key, only secretariat can confirm payment"},formatDate(e){const t=new Date(e);return t.toLocaleString("en-UK",{day:"2-digit",month:"2-digit",year:"numeric"})}}},S=n(6262);const P=(0,S.A)(U,[["render",_]]);var A=P},3069:function(e,t,n){n.d(t,{A:function(){return a}});var s=n(641);function a(e,t){return(0,s.uX)(),(0,s.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,s.Lk)("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}}}]);
//# sourceMappingURL=634.b7e5aba0.js.map