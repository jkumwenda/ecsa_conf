"use strict";(self["webpackChunkecsaconm_event"]=self["webpackChunkecsaconm_event"]||[]).push([[160],{6140:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var n=s(641),a=s(33);const l={class:"flex flex-col space-y-4 flex-1"},o={class:"flex flex-col space-y-4"},i={class:"flex sm:flex-row flex-col sm:justify-between sm:items-center items-start"},r={key:1,class:"rounded-2xl border border-white-600 shadow-sm p-4 text-abbey-500"},d=(0,n.Lk)("div",{class:"flex sm:flex-row flex-col bg-shuttle-gray-300 p-2 text-sm font-bold"},[(0,n.Lk)("div",{class:"sm:w-4/12 w-full"},"Event type"),(0,n.Lk)("div",{class:"sm:w-7/12 w-full"},"Description"),(0,n.Lk)("div",{class:"sm:w-1/12 w-full"},"Action")],-1),c={class:"sm:w-4/12 w-full"},h={class:"sm:w-7/12 w-full"},u={class:"flex space-x-2 sm:w-1/12 w-full"},p={key:1,title:"Delete",class:"p-1 border border-flamingo-600 bg-flamingo-400 rounded-full cursor-pointer"};function g(e,t,s,g,m,v){const f=(0,n.g2)("HeaderView"),w=(0,n.g2)("search-component"),y=(0,n.g2)("router-link"),E=(0,n.g2)("SpinnerComponent"),b=(0,n.g2)("PencilSquareIcon"),x=(0,n.g2)("TrashIcon"),C=(0,n.g2)("pagination-component"),P=(0,n.g2)("delete-confirmation-modal");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(f,{headerTitle:m.headerTitle},null,8,["headerTitle"]),(0,n.Lk)("div",o,[(0,n.Lk)("div",i,[(0,n.bF)(w,{onSearch:v.handleSearch},null,8,["onSearch"]),g.permissions.includes("ADD_EVENT_TYPE")?((0,n.uX)(),(0,n.Wv)(y,{key:0,to:{name:"AddEventType"},class:"mt-2 px-4 py-2 text-white-200 bg-bondi-blue-500 hover:bg-bondi-blue-400 rounded-2xl"},{default:(0,n.k6)((()=>[(0,n.eW)(" Add Event type")])),_:1})):(0,n.Q3)("",!0)]),m.isLoading?((0,n.uX)(),(0,n.Wv)(E,{key:0})):((0,n.uX)(),(0,n.CE)("div",r,[d,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(m.event_types,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,a.C4)(["flex sm:flex-row flex-col p-2 text-sm items-center",v.getRowClass(t)]),key:e.id},[(0,n.Lk)("div",c,(0,a.v_)(e.event_type),1),(0,n.Lk)("div",h,(0,a.v_)(e.description),1),(0,n.Lk)("div",u,[g.permissions.includes("UPDATE_EVENT_TYPE")?((0,n.uX)(),(0,n.Wv)(y,{key:0,title:"Edit",class:"p-1 bg-mountain-meadow-300 border border-mountain-meadow-700 rounded-full",to:{name:"EditEventType",params:{id:e.id}}},{default:(0,n.k6)((()=>[(0,n.bF)(b,{class:"w-5 h-5 text-mountain-meadow-900"})])),_:2},1032,["to"])):(0,n.Q3)("",!0),g.permissions.includes("DELETE_EVENT_TYPE")?((0,n.uX)(),(0,n.CE)("div",p,[(0,n.bF)(x,{class:"w-5 h-5 text-flamingo-800",onClick:t=>v.showDeleteConfirmation(e.id)},null,8,["onClick"])])):(0,n.Q3)("",!0)])],2)))),128)),(0,n.bF)(C,{currentPage:m.currentPage,totalPages:m.totalPages,onPageChange:v.handlePageChange},null,8,["currentPage","totalPages","onPageChange"])]))]),(0,n.bF)(P,{show:m.showDeleteModal,onConfirmed:t[0]||(t[0]=t=>v.deleteEventType(e.deleteEventTypeId)),onCanceled:v.cancelDelete},null,8,["show","onCanceled"])])}var m=s(9162),v=s(7561),f=s(9235),w=s(6695),y=s(9288),E=s(133),b=s(2521),x=s(7023),C=s(6826),P={name:"EventTypesView",components:{PencilSquareIcon:v.A,TrashIcon:f.A,PaginationComponent:w.A,SearchComponent:y.A,HeaderView:m.A,SpinnerComponent:b.A,DeleteConfirmationModal:x.A},data(){return{headerTitle:"Event Type",event_types:{},isLoading:!0,showDeleteModal:!1,deletePersonnelId:null,currentPage:1,totalPages:"",pageSize:"10",searchPhrase:""}},mounted(){this.getEventTypes()},setup(){const e=(0,C.n)(),t=e.permissions;return{permissions:t}},methods:{async getEventTypes(){try{const e=await(0,E.Fd)("event_types",this.currentPage,this.pageSize,this.searchPhrase);this.event_types=e.data,this.totalPages=e.pages,this.isLoading=!1}catch(e){console.error("Error fetching event types:",e),this.isLoading=!1}},async handleSearch(e){this.searchPhrase=e,this.getEventTypes()},async handlePageChange(e){this.currentPage=e,this.getEventTypes()},async deleteEventType(e){this.isLoading=!0;try{await(0,E.LD)("event_types",e);const t=this.event_types.findIndex((t=>t.id===e));-1!==t&&this.event_types.splice(t,1),this.showDeleteModal=!1,this.isLoading=!1}catch(t){console.error("Error fetching event types:",t),this.isLoading=!1,this.showDeleteModal=!1}},showDeleteConfirmation(e){this.deleteEventTypeId=e,this.showDeleteModal=!0},cancelDelete(){this.showDeleteModal=!1},getRowClass(e){return e%2===0?"bg-st-tropaz-100":"bg-shuttle-gray-100"}}},T=s(6262);const k=(0,T.A)(P,[["render",g]]);var _=k}}]);
//# sourceMappingURL=160.61a41a7a.js.map