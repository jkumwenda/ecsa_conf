"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[41],{2521:function(e,s,t){t.d(s,{A:function(){return p}});var o=t(6768);const r=e=>((0,o.Qi)("data-v-218fa1a2"),e=e(),(0,o.jt)(),e),a={class:"spinner"},n=r((()=>(0,o.Lk)("div",{class:"w-16 h-16 border-t-4 border-bondi-blue-500 border-solid rounded-full animate-spin"},null,-1))),i=[n];function l(e,s,t,r,n,l){return(0,o.uX)(),(0,o.CE)("div",a,i)}var d={name:"SpinnerComponent"},c=t(1241);const u=(0,c.A)(d,[["render",l],["__scopeId","data-v-218fa1a2"]]);var p=u},3672:function(e,s,t){t.d(s,{A:function(){return M}});var o=t(6768),r=t(4232);const a={class:"flex flex-row p-4 bg-catalina-blue rounded-2xl border-b-4 border-abbey-400"},n={class:"flex flex-row flex-1 justify-between space-x-2 items-center"},i={class:"flex flex-row items-center font-bold space-x-4"},l={class:"text-xl text-abbey-600"},d={class:"flex items-center space-x-4 justify-end"},c={class:"flex flex-row items-center"},u={class:"flex flex-row items-center"};function p(e,s,t,p,b,A){const h=(0,o.g2)("Bars3CenterLeftIcon"),f=(0,o.g2)("BellIcon"),g=(0,o.g2)("EnvelopeIcon"),x=(0,o.g2)("ProfileComponent");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",n,[(0,o.Lk)("div",i,[(0,o.bF)(h,{class:"h-8 w-8 text-bondi-blue-500"}),(0,o.Lk)("span",l,(0,r.v_)(t.headerTitle),1)]),(0,o.Lk)("div",d,[(0,o.Lk)("div",c,[(0,o.bF)(f,{class:"w-6 h-6 text-bondi-blue-500"})]),(0,o.Lk)("div",u,[(0,o.bF)(g,{class:"w-6 h-6 text-bondi-blue-500"})]),(0,o.bF)(x,{label:`${e.firstname} ${e.lastname}`},null,8,["label"])])])])}function b(e,s){return(0,o.uX)(),(0,o.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,o.Lk)("path",{"fill-rule":"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75H12a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})])}function A(e,s){return(0,o.uX)(),(0,o.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,o.Lk)("path",{"fill-rule":"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z","clip-rule":"evenodd"})])}function h(e,s){return(0,o.uX)(),(0,o.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,o.Lk)("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),(0,o.Lk)("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"})])}const f={class:"relative inline-block text-left"},g={class:"text-sm text-catskill-white-500"},x={key:0,class:"origin-top-right absolute right-0 mt-2 w-32 rounded-xl shadow-lg bg-bondi-blue-50"},m={class:"py-2 space-y-2",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"};function w(e,s,t,a,n,i){const l=(0,o.g2)("UserCircleIcon");return(0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("div",{onClick:s[0]||(s[0]=e=>n.isOpen=!n.isOpen),class:"flex flex-row items-center space-x-2 cursor-pointer"},[(0,o.bF)(l,{class:"w-8 h-8 text-bondi-blue-700"}),(0,o.Lk)("span",g,(0,r.v_)(a.loginUser.firstname)+" "+(0,r.v_)(a.loginUser.lastname),1)]),n.isOpen?((0,o.uX)(),(0,o.CE)("div",x,[(0,o.Lk)("div",m,[(0,o.Lk)("a",{onClick:s[1]||(s[1]=(...e)=>i.profile&&i.profile(...e)),class:"block px-4 cursor-pointer text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"}," My profile "),(0,o.Lk)("a",{onClick:s[2]||(s[2]=(...e)=>i.logout&&i.logout(...e)),class:"block px-4 cursor-pointer text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"}," Logout ")])])):(0,o.Q3)("",!0)])}t(4114);var v=t(4571);function k(e,s){return(0,o.uX)(),(0,o.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,o.Lk)("path",{"fill-rule":"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z","clip-rule":"evenodd"})])}var y=t(6826),L={name:"ProfileComponent",components:{UserCircleIcon:k},props:{label:String},data(){return{isOpen:!1}},setup(){const e=(0,y.n)(),s=e.loginUser;return{loginUser:s}},methods:{async profile(){v.A.push("/my-profile/"+this.loginUser.id)},async logout(){localStorage.removeItem("authToken"),v.A.push("/")}}},C=t(1241);const P=(0,C.A)(L,[["render",w]]);var B=P,E={name:"HeaderView",components:{Bars3CenterLeftIcon:b,BellIcon:A,EnvelopeIcon:h,ProfileComponent:B},props:{headerTitle:String}};const D=(0,C.A)(E,[["render",p]]);var M=D},9041:function(e,s,t){t.r(s),t.d(s,{default:function(){return G}});var o=t(6768),r=t(4232),a=t(1120);const n={class:"flex flex-col space-y-4 flex-1"},i={key:1,class:"flex flex-col space-y-4"},l={class:"flex flex-row space-x-4"},d={class:"flex flex-col space-y-4 w-4/12 items-center text-center space-x-4 border border-abbey-100 p-4 px-4 rounded-2xl shadow-sm"},c=(0,o.Lk)("div",{class:"flex"},[(0,o.Lk)("img",{alt:"Vue logo",class:"object-cover rounded-full",src:a})],-1),u={class:"flex flex-col space-y-2"},p={class:"text-xl font-semibold"},b=["href"],A={key:0,class:"p-4 m-6 rounded-xl text-abbey-100 py-2 text-sm bg-mountain-meadow-500"},h={class:"flex space-x-4 w-8/12"},f={class:"flex flex-col space-y-4 flex-1 p-4 px-4 border border-abbey-100 rounded-2xl shadow-sm"},g=(0,o.Lk)("h1",{class:"text-xl font-bold"},"Roles",-1),x={class:"flex flex-1 space-y-4 flex-col"},m={class:"space-y-2"},w=(0,o.Lk)("div",{class:"border-b border-1 border-b-abbey-300"},"Active roles (click to remove)",-1),v={class:"flex flex-1 flex-wrap"},k={class:"space-y-2"},y=(0,o.Lk)("div",{class:"border-b border-1 border-b-abbey-300"},"Available roles (click to add)",-1),L={class:"flex flex-1 flex-wrap"};function C(e,s,t,a,C,P){const B=(0,o.g2)("HeaderView"),E=(0,o.g2)("SpinnerComponent"),D=(0,o.g2)("password-modal");return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.bF)(B,{headerTitle:C.headerTitle},null,8,["headerTitle"]),C.isLoading?((0,o.uX)(),(0,o.Wv)(E,{key:0})):((0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("div",l,[(0,o.Lk)("div",d,[c,(0,o.Lk)("div",u,[(0,o.Lk)("p",p,(0,r.v_)(C.user.firstname)+" "+(0,r.v_)(C.user.lastname),1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.assignedPositions,(e=>((0,o.uX)(),(0,o.CE)("p",{class:"text-normal",key:e.id},(0,r.v_)(e.position),1)))),128)),(0,o.Lk)("a",{href:"mailto:"+C.user.email,class:"text-blue-500 hover:underline text-bondi-blue-500"},(0,r.v_)(C.user.email),9,b),(0,o.Lk)("div",null,[(0,o.Lk)("button",{onClick:s[0]||(s[0]=e=>P.showPassword()),class:"bg-bondi-blue-300 hover:bg-bondi-blue-500 text-bondi-blue-800 rounded-xl px-4 py-2"}," Reset Password ")]),C.message?((0,o.uX)(),(0,o.CE)("div",A,(0,r.v_)(C.message),1)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",h,[(0,o.Lk)("div",f,[g,(0,o.Lk)("div",x,[(0,o.Lk)("div",m,[w,(0,o.Lk)("div",v,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(C.assignedRoles,(e=>((0,o.uX)(),(0,o.CE)("button",{class:"p-4 py-1 text-sm m-1 bg-bondi-blue-300 text-bondi-blue-800 rounded-xl",key:e.id},(0,r.v_)(e.role),1)))),128))])]),(0,o.Lk)("div",k,[y,(0,o.Lk)("div",L,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(P.filteredRoles,(e=>((0,o.uX)(),(0,o.CE)("button",{class:"p-4 py-1 text-sm m-1 bg-bondi-blue-300 text-bondi-blue-800 rounded-xl",key:e.id},(0,r.v_)(e.role),1)))),128))])])])])])])])),(0,o.bF)(D,{show:C.showPasswordModal,onConfirmed:P.confirmPassword,onClosed:P.cancelPassword,user_id:C.user.id,onFileUploaded:e.refreshItems},null,8,["show","onConfirmed","onClosed","user_id","onFileUploaded"])])}var P=t(3672),B=t(133),E=t(2521),D=t(6826),M=t(5130);const I={key:0,class:"fixed inset-0 flex items-center justify-center z-50"},X={class:"flex flex-col border-2 border-bondi-blue-600 border-t-8 bg-white-100 rounded-xl shadow-lg w-5/12 z-50"},F=(0,o.Lk)("div",{class:"font-bold text-lg text-abbey-500 border-b-2 p-4 px-6 space-y-4 border-bondi-blue-600"}," New password ",-1),Q={key:0,class:"p-4 m-6 m-y-4 rounded-xl text-mountain-meadow-800 py-2 text bg-spray-600"},S={class:"block"},H=(0,o.Lk)("span",{class:"after:content-['*'] after:ml-0.5 after:text-red-500 block text-sm font-medium text-slate-700"}," New password ",-1),T={class:"flex flex-row space-x-4"},R=(0,o.Lk)("button",{type:"submit",class:"mt-2 px-4 py-2 text-white-100 bg-bondi-blue hover:bg-bondi-blue-400 rounded-2xl"}," Save ",-1);function U(e,s,t,a,n,i){const l=(0,o.g2)("SpinnerComponent");return t.show?((0,o.uX)(),(0,o.CE)("div",I,[(0,o.Lk)("div",X,[F,n.message?((0,o.uX)(),(0,o.CE)("div",Q,(0,r.v_)(n.message),1)):(0,o.Q3)("",!0),(0,o.Lk)("form",{class:"flex flex-col space-y-4 p-4 px-6",onSubmit:s[2]||(s[2]=(0,M.D$)(((...e)=>i.updatePassword&&i.updatePassword(...e)),["prevent"])),method:"POST"},[n.isLoading?((0,o.uX)(),(0,o.Wv)(l,{key:0})):(0,o.Q3)("",!0),(0,o.Lk)("label",S,[H,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>n.passwordData.password=e),class:"mt-2 px-3 py-3 bg-white border border-1 shadow-sm border-abbey-400 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-2xl sm:text-sm focus:ring-1",placeholder:"New password",required:""},null,512),[[M.Jo,n.passwordData.password]])]),(0,o.Lk)("div",T,[R,(0,o.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>i.close&&i.close(...e)),class:"mt-2 px-4 py-2 boder border-2 border-abbey-400 hover:border-abbey-200 rounded-2xl"},"Close")])],32)])])):(0,o.Q3)("",!0)}var z={components:{SpinnerComponent:E.A},data(){return{passwordData:{password:""},isLoading:!1,message:""}},props:{show:{type:Boolean,required:!0},user_id:{type:Number,required:!0}},methods:{async updatePassword(){this.isLoading=!0;try{const e=await(0,B.fk)("users/reset_password",this.user_id,this.passwordData);this.user_data=e.data,this.isLoading=!1,this.$emit("password-set"),this.message="Password updated successfully"}catch(e){this.isLoading=!1}},close(){this.$emit("closed")}}},J=t(1241);const Z=(0,J.A)(z,[["render",U]]);var q=Z,j={name:"MyProfileView",components:{SpinnerComponent:E.A,HeaderView:P.A,PasswordModal:q},data(){return{headerTitle:"My profile",user:[],id:this.$route.params.id,isLoading:!0,roles:[],departments:[],positions:[],assignedRoles:[],signatures:[],roleData:{},positionData:{},departmentData:{},message:"",userPasswordData:{id:""},currentPage:1,totalPages:"",pageSize:"10",searchPhrase:"",showPasswordModal:!1}},mounted(){this.getUser(),this.getRoles(),this.getDepartments(),this.getPositions()},setup(){const e=(0,D.n)(),s=e.permissions;return{permissions:s}},computed:{filteredRoles(){return this.roles.filter((e=>{const s=e.id;return!this.assignedRoles.some((e=>e.role_id===s))}))},filteredPositions(){return this.positions.filter((e=>{const s=e.id;return!this.assignedPositions.some((e=>e.position_id===s))}))},filteredDepartments(){return this.departments.filter((e=>{const s=e.id;return!this.assignedDepartments.some((e=>e.department_id===s))}))}},methods:{async getUser(){try{const e=await(0,B.Gk)("users",this.id);this.user=e.user,this.assignedRoles=e.roles,this.signatures=e.signatures,this.isLoading=!1}catch(e){console.error("Error fetching users:",e),this.isLoading=!1}},async getRoles(){try{const e=await(0,B.Fd)("roles",this.currentPage,this.pageSize,this.searchPhrase);this.roles=e.data,this.isLoading=!1}catch(e){console.error("Error fetching roles:",e),this.isLoading=!1}},async getDepartments(){try{const e=await(0,B.Fd)("departments",this.currentPage,this.pageSize,this.searchPhrase);this.departments=e.data,this.isLoading=!1}catch(e){console.error("Error fetching departments:",e),this.isLoading=!1}},async getPositions(){try{const e=await(0,B.Fd)("positions",this.currentPage,this.pageSize,this.searchPhrase);this.positions=e.data,this.isLoading=!1}catch(e){console.error("Error fetching positions:",e),this.isLoading=!1}},showPassword(){this.showPasswordModal=!0},confirmPassword(){this.getUser(),this.showPasswordModal=!1},cancelPassword(){this.showPasswordModal=!1}}};const V=(0,J.A)(j,[["render",C]]);var G=V},1120:function(e){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAZABkAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/wgALCADIAMgBAREA/8QAGwABAAMAAwEAAAAAAAAAAAAAAAQFBgECAwf/2gAIAQEAAAAA+zAAAAAAAAAAAAAAAAAAIsDpMsAAAOtDWCTezQAAz9YDtpZgABGyoCRqwACpogDVyAAFLTAGplAAKugAdtf2AAQM2A508sAB4ZTgD11vIABm4AOb21AAHnlPMLa9AABT0gaSeAACNlQ0s4AAFbngtb4AAPDM+Ic6KwAAR6yp6gc2l16AHFRVeIAO1jaTAdM5CAACdofQZuAAABM03KvzgAABf2jO1wAABM0//8QAMxAAAgECAwYEBAUFAAAAAAAAAQIDBBEABSESMDFAQVEgIlJxECMyYRMUgZHBM2BictH/2gAIAQEAAT8A/u6ozGmprh5Lt6V1OHz4D+nBf/ZsDPnv5oFt9mxT5xTzEK942Pq4fvjjybusaFnICgXJOK7NnmJjgJSPhfqfDBmFTT2CSkr6TqMUOYR1i2PllHFe/tyWbVxnlMCH5aHW3U+NHaNw6EhhqCMZfWisgubCRdGH88hXz/l6OSQHzWsPc7mhqTS1SSX8vBvbANxcb/PXtBEndr/tuqFzJQwseOzv8+veDtrusuUrl8IPpvv88jLUqOB9Da/ruUXbdVHU2wihEVBwUW3+bymOgYAX2zs+25BIIINiMZa8klDG0pJY31Pbf1kAqaWSMjW1x74IsSDxG4poGqahIl4k6nsMKoRFUcALDkM0pGp6kuB8uQ3B+/bxgFiABcngBjKcveAmaXRiLBew5GaJZ4mjcXDC3tiaJoJmicaqbeLJKYPK07DRNF9+Tzumuq1CjUeVv48WTps5ep9RJ5PMVDZfMD6b+LKHDZeg9JIPJ5zOI6T8IHzSG36eLJakRzNAx0fVffkqqripI9qQ69F6nFTUvVTGR+vAdh4lJVgymxGoOMvzJKpAjkLMOI77+aupoPrlW/YanFTnjNdadLf5N/zEkjyuXkYsx6ncAkG4Njijzl47JUAuvRhxGIZ4qhNqJww+26ZgqlmIAHEnFXnQUlKZQx9Z4Ylqp5yTJKx+19N6kjxsGRipHUHEGdzR2EyiQd+BxT5nTVGgfYb0tp45ZUhjaSRrKOJxXZhJVuQLrEOC9/fkqPM5qVgrEvF6T09sQzR1EQkja6nw5pXGqm2EPykOn3PflMvrWpJtbmJvqH84BDKGBuDqD8c3qTBS7CmzSafp15bJakyQNCxuY+Ht8c6l263Y6IoHLZXP+BXJc+V/Kfh//9k="}}]);
//# sourceMappingURL=41.ede9a2e0.js.map