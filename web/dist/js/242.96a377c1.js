"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[242],{2521:function(e,s,i){i.d(s,{A:function(){return u}});var o=i(6768);const n=e=>((0,o.Qi)("data-v-218fa1a2"),e=e(),(0,o.jt)(),e),r={class:"spinner"},t=n((()=>(0,o.Lk)("div",{class:"w-16 h-16 border-t-4 border-bondi-blue-500 border-solid rounded-full animate-spin"},null,-1))),l=[t];function a(e,s,i,n,t,a){return(0,o.uX)(),(0,o.CE)("div",r,l)}var d={name:"SpinnerComponent"},c=i(1241);const p=(0,c.A)(d,[["render",a],["__scopeId","data-v-218fa1a2"]]);var u=p},3672:function(e,s,i){i.d(s,{A:function(){return I}});var o=i(6768),n=i(4232);const r={class:"flex flex-row p-4 bg-catalina-blue rounded-2xl border-b-4 border-abbey-400"},t={class:"flex flex-row flex-1 justify-between space-x-2 items-center"},l={class:"flex flex-row items-center font-bold space-x-4"},a={class:"text-xl text-abbey-600"},d={class:"flex items-center space-x-4 justify-end"},c={class:"flex flex-row items-center"},p={class:"flex flex-row items-center"};function u(e,s,i,u,m,f){const b=(0,o.g2)("Bars3CenterLeftIcon"),h=(0,o.g2)("BellIcon"),x=(0,o.g2)("EnvelopeIcon"),g=(0,o.g2)("ProfileComponent");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("div",t,[(0,o.Lk)("div",l,[(0,o.bF)(b,{class:"h-8 w-8 text-bondi-blue-500"}),(0,o.Lk)("span",a,(0,n.v_)(i.headerTitle),1)]),(0,o.Lk)("div",d,[(0,o.Lk)("div",c,[(0,o.bF)(h,{class:"w-6 h-6 text-bondi-blue-500"})]),(0,o.Lk)("div",p,[(0,o.bF)(x,{class:"w-6 h-6 text-bondi-blue-500"})]),(0,o.bF)(g,{label:`${e.firstname} ${e.lastname}`},null,8,["label"])])])])}function m(e,s){return(0,o.uX)(),(0,o.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,o.Lk)("path",{"fill-rule":"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75H12a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})])}function f(e,s){return(0,o.uX)(),(0,o.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,o.Lk)("path",{"fill-rule":"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z","clip-rule":"evenodd"})])}function b(e,s){return(0,o.uX)(),(0,o.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,o.Lk)("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),(0,o.Lk)("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"})])}const h={class:"relative inline-block text-left"},x={class:"text-sm text-catskill-white-500"},g={key:0,class:"origin-top-right absolute right-0 mt-2 w-32 rounded-xl shadow-lg bg-bondi-blue-50"},v={class:"py-2 space-y-2",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"};function w(e,s,i,r,t,l){const a=(0,o.g2)("UserCircleIcon");return(0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",{onClick:s[0]||(s[0]=e=>t.isOpen=!t.isOpen),class:"flex flex-row items-center space-x-2 cursor-pointer"},[(0,o.bF)(a,{class:"w-8 h-8 text-bondi-blue-700"}),(0,o.Lk)("span",x,(0,n.v_)(r.loginUser.firstname)+" "+(0,n.v_)(r.loginUser.lastname),1)]),t.isOpen?((0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("div",v,[(0,o.Lk)("a",{onClick:s[1]||(s[1]=(...e)=>l.profile&&l.profile(...e)),class:"block px-4 cursor-pointer text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"}," My profile "),(0,o.Lk)("a",{onClick:s[2]||(s[2]=(...e)=>l.logout&&l.logout(...e)),class:"block px-4 cursor-pointer text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"}," Logout ")])])):(0,o.Q3)("",!0)])}i(4114);var k=i(4571);function L(e,s){return(0,o.uX)(),(0,o.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,o.Lk)("path",{"fill-rule":"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z","clip-rule":"evenodd"})])}var y=i(6826),C={name:"ProfileComponent",components:{UserCircleIcon:L},props:{label:String},data(){return{isOpen:!1}},setup(){const e=(0,y.n)(),s=e.loginUser;return{loginUser:s}},methods:{async profile(){k.A.push("/my-profile/"+this.loginUser.id)},async logout(){localStorage.removeItem("authToken"),k.A.push("/")}}},E=i(1241);const P=(0,E.A)(C,[["render",w]]);var _=P,A={name:"HeaderView",components:{Bars3CenterLeftIcon:m,BellIcon:f,EnvelopeIcon:b,ProfileComponent:_},props:{headerTitle:String}};const X=(0,E.A)(A,[["render",u]]);var I=X},8242:function(e,s,i){i.r(s),i.d(s,{default:function(){return E}});var o=i(6768),n=i(4232);const r={class:"flex flex-col space-y-4 flex-1"},t={key:1,class:"flex flex-col space-y-4"},l={class:"flex flex-col flex-1 space-y-4 border border-white-600 text-abbey-600 p-4 px-4 rounded-2xl shadow-sm"},a={class:"flex"},d={class:"text-2xl"},c=(0,o.Lk)("span",{class:"font-semibold text-bondi-blue-500"},"Role Name:: ",-1),p={class:"flex flex-col"},u=(0,o.Lk)("div",{class:"flex flex-row space-x-2 text-sm uppercase text-bondi-blue-800 py-2 border-b border-1 border-bondi-blue-500"},[(0,o.Lk)("p",null,"Permissions"),(0,o.Lk)("p",{class:"capitalize font-semibold"},"(click to remove)")],-1),m={class:"flex flex-row flex-wrap my-4"},f=["onClick"],b=(0,o.Lk)("div",{class:"flex flex-row space-x-2 text-sm uppercase text-bondi-blue-800 py-2 border-b border-1 border-bondi-blue-500"},[(0,o.Lk)("p",null,"Permissions"),(0,o.Lk)("p",{class:"capitalize font-semibold"},"(click to assign)")],-1),h={class:"flex flex-row flex-wrap my-4"},x=["onClick"];function g(e,s,i,g,v,w){const k=(0,o.g2)("HeaderView"),L=(0,o.g2)("SpinnerComponent");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(k,{headerTitle:v.headerTitle},null,8,["headerTitle"]),v.isLoading?((0,o.uX)(),(0,o.Wv)(L,{key:0})):((0,o.uX)(),(0,o.CE)("div",t,[(0,o.Lk)("div",l,[(0,o.Lk)("div",a,[(0,o.Lk)("p",d,[c,(0,o.eW)((0,n.v_)(v.role.role),1)])]),(0,o.Lk)("div",p,[u,(0,o.Lk)("div",m,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(v.assigned_permissions,(e=>((0,o.uX)(),(0,o.CE)("button",{class:"bg-bondi-blue-50 text-bondi-blue-700 rounded-xl px-4 py-1 m-1",key:e.id,onClick:s=>w.deleteRolePermission(e.id)},(0,n.v_)(e.permission),9,f)))),128))]),b,(0,o.Lk)("div",h,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(w.filteredPermissions,(e=>((0,o.uX)(),(0,o.CE)("button",{class:"bg-bondi-blue-300 text-bondi-blue-600 rounded-xl px-4 py-1 m-1",key:e.id,onClick:s=>w.addRolePermission(e.id)},(0,n.v_)(e.permission),9,x)))),128))])])])]))])}var v=i(133),w=i(2521),k=i(3672),L={name:"RoleView",components:{SpinnerComponent:w.A,HeaderView:k.A},data(){return{headerTitle:"Role",id:this.$route.params.id,isLoading:!0,role:{},assigned_permissions:[],permissions:[],currentPage:1,totalPages:"",pageSize:200,searchPhrase:""}},computed:{filteredPermissions(){return this.permissions.filter((e=>{const s=e.id;return!this.assigned_permissions.some((e=>e.permission_id===s))}))}},mounted(){this.getRole(),this.getPermissions()},methods:{async getRole(){try{const e=await(0,v.Gk)("roles",this.id);this.role=e.role,this.assigned_permissions=e.permissions,this.isLoading=!1}catch(e){console.error("Error fetching roles:",e),this.isLoading=!1}},async getPermissions(){try{const e=await(0,v.Fd)("permissions",this.currentPage,this.pageSize,this.searchPhrase);this.permissions=e.data,this.isLoading=!1}catch(e){console.error("Error fetching permissions:",e),this.isLoading=!1}},async deleteRolePermission(e){this.isLoading=!0;try{await(0,v.LD)("roles/permissions",e);const s=this.assigned_permissions.findIndex((s=>s.id===e));-1!==s&&this.assigned_permissions.splice(s,1),this.isLoading=!1}catch(i){console.error("Error fetching permissions:",i),this.isLoading=!1}const s=this.assigned_permissions.findIndex((s=>s.id===e));-1!==s&&this.assigned_permissions.splice(s,1)},async addRolePermission(e){const s={role_id:this.id,permission_id:e};this.isLoading=!0;try{await(0,v.wE)("roles/permissions/",s),this.getRole(),this.getPermissions(),this.isLoading=!1}catch(i){console.error("Error add role permission failed:",i),this.isLoading=!1}}}},y=i(1241);const C=(0,y.A)(L,[["render",g]]);var E=C}}]);
//# sourceMappingURL=242.96a377c1.js.map