{"version":3,"file":"js/74.c697ceba.js","mappings":"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","sources":["webpack://web/./src/views/auth/Login.vue","webpack://web/./src/services/authService.js","webpack://web/./src/views/auth/Login.vue?930c"],"sourcesContent":["<template>\n    <div class=\"sm:flex sm:flex-row flex flex-col flex-1 justify-center items-center\">\n        <div\n            class=\"sm:w-7/12 w-11/12  flex flex-col sm:space-y-4 space-y-2 rounded-2xl p-8 bg-ghost-300 drop-shadow-md\">\n            <div class=\"font-bold font-archivo text-ghost-900 text-3xl\">Sign in</div>\n            <div\n                class=\"p-4 text-md border border-solid border-great-blue-400 bg-great-blue-50 text-great-blue rounded-2xl font-roboto\">\n                Sign in to Confirm Attendance or Register for Event Participation</div>\n            <div v-if=\"message\" class=\"text-flamingo-500\">{{ message }}</div> <!-- Display error message -->\n            <SpinnerComponent v-if=\"isLoading\" />\n            <form v-else class=\"flex flex-col space-y-4\" @submit.prevent=\"submitLoginForm\" method=\"POST\">\n                <label class=\"block\">\n                    <input type=\"email\" name=\"email\" v-model=\"userData.username\"\n                        class=\"mt-2 p-4 bg-white border shadow-sm border-ghost-600 placeholder-slate-400 focus:outline-none focus:border-athens-gray-500 focus:border-athens-gray-500 block w-full rounded-2xl sm:text-sm focus:ring-1\"\n                        placeholder=\"Email\" required />\n                </label>\n                <label class=\"block\">\n                    <input type=\"password\" name=\"password\" v-model=\"userData.password\"\n                        class=\"mt-2 p-4 bg-white border shadow-sm border-ghost-600 placeholder-slate-400 focus:outline-none focus:border-athens-gray-500 focus:border-athens-gray-500 block w-full rounded-2xl sm:text-sm focus:ring-1\"\n                        placeholder=\"Password\" required />\n                </label>\n                <div class=\"flex sm:flex-row flex-col sm:space-x-4 space-y-2\">\n                    <button type=\"submit\"\n                        class=\"flex-1 px-8 py-4 text-white-50 font-bold rounded-2xl bg-bondi-blue text-stone-100 hover:bg-bondi-blue-600\">\n                        Sign in\n                    </button>\n                </div>\n                <div class=\"flex flex-row sm:space-x-4 justify-center\">\n                    <router-link :to=\"{ name: 'ResetPassword' }\"\n                        class=\"cursor-poiter text-bondi-blue-500 font-bold cursor-pointer\">\n                        Forgot your password?\n                    </router-link>\n                    <span>|</span>\n                    <span class=\"\">Need help?\n                    </span>\n                </div>\n                <div class=\"flex sm:flex-row flex-col sm:space-x-4 space-y-2 justify-center\">\n                    <p class=\"\">\n                        New to this website <router-link :to=\"{ name: 'Register' }\"\n                            class=\"cursor-poiter text-bondi-blue-500 font-bold cursor-pointer\">Register</router-link>\n                    </p>\n                </div>\n            </form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { login } from \"@/services/authService\";\nimport SpinnerComponent from \"@/components/Spinner.vue\";\nimport router from \"@/router\";\nimport { useAuthStore } from \"@/store/authStore\";\nimport { setAuthToken } from \"@/services/apiService\"; // Adjust the path as needed\n\n\nexport default {\n    name: \"LoginView\",\n    components: {\n        SpinnerComponent\n    },\n    data() {\n        return {\n            userData: {\n                username: \"\",\n                password: \"\",\n            },\n            SpinnerComponent,\n            message: null,\n            isLoading: false,\n        };\n    },\n\n    methods: {\n        async submitLoginForm() {\n            this.isLoading = true;\n            try {\n                const response = await login(\"auth/login\", this.userData);\n                // saveTokenToLocalStorage(response.access_token);\n                const authStore = useAuthStore();\n                authStore.setUser(response.user);\n                authStore.setPermissions(response.permissions);\n                authStore.setAccessToken(response.access_token);\n                setAuthToken();\n\n                this.isLoading = false;\n\n                this.$nextTick(() => {\n                    router.push(\"/dashboard\");\n                });\n            } catch (error) {\n                this.message = \"Invalid username or password!\"; // Set the error message\n                this.isLoading = false;\n            }\n        },\n    },\n};\n</script>","import axios from \"axios\";\n\nconst instance = axios.create({\n  baseURL: process.env.VUE_APP_API_URL,\n});\n\n// Function to save the token in local storage\nexport function saveTokenToLocalStorage(token) {\n  localStorage.setItem(\"authToken\", token);\n}\n\n// Function to remove the token from local storage\nfunction removeTokenFromLocalStorage() {\n  localStorage.removeItem(\"authToken\");\n}\n\n// Function to perform user login\n// Function to perform user login\nexport const login = async (url, userData) => {\n  try {\n    const params = new URLSearchParams();\n    params.append(\"grant_type\", \"\");\n    params.append(\"username\", userData.username);\n    params.append(\"password\", userData.password);\n    params.append(\"scope\", \"\");\n    params.append(\"client_id\", \"\");\n    params.append(\"client_secret\", \"\");\n\n    const response = await instance.post(url, params, {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    // Handle error, e.g., log it or throw a custom error\n    console.error(\"Login error:\", error);\n    throw error;\n  }\n};\n\n// Function to perform user logout\nexport function logout() {\n  removeTokenFromLocalStorage();\n}\n\n// Function to refresh the authentication token (placeholder, replace with actual logic)\nexport async function refreshToken() {\n  try {\n    const response = await instance.post(\"/refresh-token-endpoint\");\n    const { token } = response.data;\n    saveTokenToLocalStorage(token);\n    return token;\n  } catch (error) {\n    // Handle error, e.g., log it or throw a custom error\n    console.error(\"Refresh token error:\", error);\n    throw error;\n  }\n}\n\nexport default instance;\n","import { render } from \"./Login.vue?vue&type=template&id=06b350a0\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","key","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","$data","message","_hoisted_5","_toDisplayString","_createCommentVNode","isLoading","_createBlock","_component_SpinnerComponent","onSubmit","_cache","_withModifiers","args","$options","submitLoginForm","method","_hoisted_6","name","$event","userData","username","placeholder","required","_hoisted_7","password","_hoisted_8","_hoisted_9","_createVNode","_component_router_link","to","default","_withCtx","_createTextVNode","_","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","instance","axios","create","baseURL","process","login","async","url","params","URLSearchParams","append","response","post","headers","data","error","console","components","SpinnerComponent","methods","this","authStore","useAuthStore","setUser","user","setPermissions","permissions","setAccessToken","access_token","setAuthToken","$nextTick","router","push","__exports__","render"],"sourceRoot":""}