"use strict";(self["webpackChunkecsaconm_event"]=self["webpackChunkecsaconm_event"]||[]).push([[549],{5659:function(e,s,n){n.r(s),n.d(s,{default:function(){return O}});var a=n(641),r=n(33);const t={class:"flex flex-col space-y-4 flex-1"},i={class:"flex flex-col space-y-4"},o={class:"flex sm:flex-row flex-col sm:justify-between sm:items-center items-start"},l={key:1,class:"rounded-2xl border border-white-600 shadow-sm p-4 text-abbey-500"},d=(0,a.Lk)("div",{class:"flex sm:flex-row flex-col bg-shuttle-gray-300 p-2 text-sm font-bold"},[(0,a.Lk)("div",{class:"sm:w-4/12 w-full"},"Organiser"),(0,a.Lk)("div",{class:"sm:w-7/12 w-full"},"Description"),(0,a.Lk)("div",{class:"sm:w-1/12 w-full"},"Action")],-1),c={class:"sm:w-4/12 w-full"},g={class:"sm:w-7/12 w-full"},h={class:"flex space-x-2 sm:w-1/12 w-full"},u={key:1,class:"p-1 border border-flamingo-600 bg-flamingo-400 rounded-full cursor-pointer"};function m(e,s,n,m,f,w){const p=(0,a.g2)("HeaderView"),b=(0,a.g2)("search-component"),x=(0,a.g2)("router-link"),C=(0,a.g2)("SpinnerComponent"),k=(0,a.g2)("PencilSquareIcon"),v=(0,a.g2)("TrashIcon"),P=(0,a.g2)("pagination-component"),L=(0,a.g2)("delete-confirmation-modal");return(0,a.uX)(),(0,a.CE)("div",t,[(0,a.bF)(p,{headerTitle:f.headerTitle},null,8,["headerTitle"]),(0,a.Lk)("div",i,[(0,a.Lk)("div",o,[(0,a.bF)(b,{onSearch:w.handleSearch},null,8,["onSearch"]),m.permissions.includes("ADD_ROLE")?((0,a.uX)(),(0,a.Wv)(x,{key:0,to:{name:"AddOrganiser"},class:"mt-2 px-4 py-2 text-white-200 bg-bondi-blue-500 hover:bg-bondi-blue-400 rounded-2xl"},{default:(0,a.k6)((()=>[(0,a.eW)(" Add Organiser")])),_:1})):(0,a.Q3)("",!0)]),f.isLoading?((0,a.uX)(),(0,a.Wv)(C,{key:0})):((0,a.uX)(),(0,a.CE)("div",l,[d,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(f.organisers,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{class:(0,r.C4)(["flex sm:flex-row flex-col p-2 text-sm items-center",w.getRowClass(s)]),key:e.id},[(0,a.Lk)("div",c,(0,r.v_)(e.organiser),1),(0,a.Lk)("div",g,(0,r.v_)(e.description),1),(0,a.Lk)("div",h,[m.permissions.includes("UPDATE_ROLE")?((0,a.uX)(),(0,a.Wv)(x,{key:0,class:"p-1 bg-mountain-meadow-300 border border-mountain-meadow-700 rounded-full",to:{name:"EditOrganiser",params:{id:e.id}}},{default:(0,a.k6)((()=>[(0,a.bF)(k,{class:"w-5 h-5 text-mountain-meadow-900"})])),_:2},1032,["to"])):(0,a.Q3)("",!0),m.permissions.includes("DELETE_ROLE")?((0,a.uX)(),(0,a.CE)("div",u,[(0,a.bF)(v,{class:"w-5 h-5 text-flamingo-800",onClick:s=>w.showDeleteConfirmation(e.id)},null,8,["onClick"])])):(0,a.Q3)("",!0)])],2)))),128)),(0,a.bF)(P,{currentPage:f.currentPage,totalPages:f.totalPages,onPageChange:w.handlePageChange},null,8,["currentPage","totalPages","onPageChange"])]))]),(0,a.bF)(L,{show:f.showDeleteModal,onConfirmed:s[0]||(s[0]=s=>w.deleteOrganiser(e.deleteOrganiserId)),onCanceled:w.cancelDelete},null,8,["show","onCanceled"])])}var f=n(9162),w=n(7561),p=n(9235),b=n(6695),x=n(9288),C=n(133),k=n(2521),v=n(7023),P=n(6826),L={name:"OrganisersView",components:{PencilSquareIcon:w.A,TrashIcon:p.A,PaginationComponent:b.A,SearchComponent:x.A,HeaderView:f.A,SpinnerComponent:k.A,DeleteConfirmationModal:v.A},data(){return{headerTitle:"Organisers",organisers:{},isLoading:!0,showDeleteModal:!1,deletePersonnelId:null,currentPage:1,totalPages:"",pageSize:"10",searchPhrase:""}},mounted(){this.getOrganisers()},setup(){const e=(0,P.n)(),s=e.permissions;return{permissions:s}},methods:{async getOrganisers(){try{const e=await(0,C.Fd)("organisers",this.currentPage,this.pageSize,this.searchPhrase);this.organisers=e.data,this.totalPages=e.pages,this.isLoading=!1}catch(e){console.error("Error fetching organisers:",e),this.isLoading=!1}},async handleSearch(e){this.searchPhrase=e,this.getOrganisers()},async handlePageChange(e){this.currentPage=e,this.getOrganisers()},async deleteOrganiser(e){this.isLoading=!0;try{await(0,C.LD)("organisers",e);const s=this.organisers.findIndex((s=>s.id===e));-1!==s&&this.organisers.splice(s,1),this.showDeleteModal=!1,this.isLoading=!1}catch(s){console.error("Error fetching organisers:",s),this.isLoading=!1,this.showDeleteModal=!1}},showDeleteConfirmation(e){this.deleteOrganiserId=e,this.showDeleteModal=!0},cancelDelete(){this.showDeleteModal=!1},getRowClass(e){return e%2===0?"bg-st-tropaz-100":"bg-shuttle-gray-50"}}},y=n(6262);const D=(0,y.A)(L,[["render",m]]);var O=D}}]);
//# sourceMappingURL=549.efcf8b3b.js.map