"use strict";(self["webpackChunkecsaconm_event"]=self["webpackChunkecsaconm_event"]||[]).push([[484],{7023:function(e,t,n){n.d(t,{A:function(){return v}});var s=n(6768),r=n(4232);const o={key:0,class:"fixed inset-0 flex items-center justify-center z-50"},a={class:"flex flex-col justify-center items-center border border-abbey-500 border-t-4 bg-white-50 rounded-2xl shadow-lg p-4 w-96 z-50 text-abbey-500"},l={class:"text-lg font-light mb-4"},i=(0,s.Lk)("p",{class:"text-2xl font-semibold mb-4"},"Are you sure?",-1),d={class:"mb-4"},c={class:"flex justify-end"};function u(e,t,n,u,h,g){const m=(0,s.g2)("XCircleIcon");return n.show?((0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",a,[(0,s.Lk)("p",l,[(0,s.bF)(m,{class:"h-12 w-12 text-flamingo-900"})]),i,(0,s.Lk)("p",d,(0,r.v_)(n.message),1),(0,s.Lk)("div",c,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>g.cancel&&g.cancel(...e)),class:"bg-abbey-50 hover:bg-abbey-100 text-abbey-600 py-1 px-4 rounded-2xl mr-2"}," Cancel "),(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>g.confirm&&g.confirm(...e)),class:"bg-flamingo-800 text-white hover:bg-flamingo-600 py-1 px-4 rounded-2xl"}," Delete ")])])])):(0,s.Q3)("",!0)}var h=n(5246),g={components:{XCircleIcon:h.A},props:{show:{type:Boolean,required:!0},message:{type:String,default:"Are you sure you want to delete this item?"}},methods:{confirm(){this.$emit("confirmed")},cancel(){this.$emit("canceled")}}},m=n(1241);const p=(0,m.A)(g,[["render",u]]);var v=p},6695:function(e,t,n){n.d(t,{A:function(){return g}});var s=n(6768),r=n(4232);const o={class:"flex flex-row space-x-4 bg-athens-gray-100 py-4 text-sm items-center"},a=["disabled"],l={class:"font-bold"},i=["disabled"];function d(e,t,n,d,c,u){return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>u.prevPage&&u.prevPage(...e)),disabled:1===n.currentPage,class:"px-4 py-2 cursor-pointer rounded-2xl text-white-200 bg-daintree-800 hover:bg-daintree-400 p-1"},"Previous",8,a),(0,s.Lk)("div",l,"Page "+(0,r.v_)(n.currentPage)+" of "+(0,r.v_)(n.totalPages),1),(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>u.nextPage&&u.nextPage(...e)),disabled:n.currentPage===n.totalPages,class:"px-4 py-2 cursor-pointer rounded-2xl text-white-200 bg-daintree-800 hover:bg-daintree-400 p-1"},"Next",8,i)])}var c={name:"PaginationComponent",props:{currentPage:Number,totalPages:Number},methods:{prevPage(){console.log("Here"),this.currentPage>1&&this.$emit("page-change",this.currentPage-1)},nextPage(){this.currentPage<this.totalPages&&this.$emit("page-change",this.currentPage+1)}}},u=n(1241);const h=(0,u.A)(c,[["render",d]]);var g=h},9288:function(e,t,n){n.d(t,{A:function(){return d}});var s=n(6768),r=n(5130);function o(e,t,n,o,a,l){return(0,s.uX)(),(0,s.CE)("form",{onSubmit:t[2]||(t[2]=(0,r.D$)(((...t)=>e.addRole&&e.addRole(...t)),["prevent"])),class:"sm:w-4/12 w-12/12 flex flex-row space-x-2"},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchQuery=e),class:"mt-2 px-4 p-2 bg-white border shadow-sm border-ghost-600 placeholder-slate-400 focus:outline-none focus:border-athens-gray-500 focus:border-athens-gray-500 block w-full rounded-2xl sm:text-sm focus:ring-1",placeholder:"Search..."},null,512),[[r.Jo,a.searchQuery]]),(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.search&&l.search(...e)),class:"mt-2 px-4 py-2 text-white-400 bg-daintree-600 hover:bg-daintree-400 rounded-2xl"}," Search")],32)}var a={name:"SearchComponent",data(){return{searchQuery:""}},methods:{search(){this.$emit("search",this.searchQuery)}}},l=n(1241);const i=(0,l.A)(a,[["render",o]]);var d=i},3664:function(e,t,n){n.d(t,{A:function(){return S}});var s=n(6768),r=n(4232);const o={class:"flex flex-row p-4 bg-catalina-blue rounded-2xl border-b-4 border-abbey-400"},a={class:"flex flex-row flex-1 justify-between space-x-2 items-center"},l={class:"flex flex-row items-center font-bold space-x-4"},i={class:"sm:text-xl text-md text-abbey-600"},d={class:"flex items-center space-x-4 justify-end"},c={class:"flex flex-row items-center"},u={class:"flex flex-row items-center"};function h(e,t,n,h,g,m){const p=(0,s.g2)("Bars3CenterLeftIcon"),v=(0,s.g2)("BellIcon"),f=(0,s.g2)("EnvelopeIcon"),b=(0,s.g2)("ProfileComponent");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",a,[(0,s.Lk)("div",l,[(0,s.bF)(p,{class:"h-8 w-8 text-bondi-blue-500"}),(0,s.Lk)("span",i,(0,r.v_)(n.headerTitle),1)]),(0,s.Lk)("div",d,[(0,s.Lk)("div",c,[(0,s.bF)(v,{class:"w-6 h-6 text-bondi-blue-500"})]),(0,s.Lk)("div",u,[(0,s.bF)(f,{class:"w-6 h-6 text-bondi-blue-500"})]),(0,s.bF)(b,{label:`${e.firstname} ${e.lastname}`},null,8,["label"])])])])}var g=n(8309);function m(e,t){return(0,s.uX)(),(0,s.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,s.Lk)("path",{"fill-rule":"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z","clip-rule":"evenodd"})])}function p(e,t){return(0,s.uX)(),(0,s.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,s.Lk)("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),(0,s.Lk)("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"})])}const v={class:"relative inline-block text-left"},f={class:"text-sm text-catskill-white-500"},b={key:0,class:"origin-top-right absolute right-0 mt-2 w-32 rounded-xl shadow-lg bg-bondi-blue-50"},x={class:"py-2 space-y-2",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"};function w(e,t,n,o,a,l){const i=(0,s.g2)("UserCircleIcon");return(0,s.uX)(),(0,s.CE)("div",v,[(0,s.Lk)("div",{onClick:t[0]||(t[0]=e=>a.isOpen=!a.isOpen),class:"flex flex-row items-center space-x-2 cursor-pointer"},[(0,s.bF)(i,{class:"w-8 h-8 text-bondi-blue-700"}),(0,s.Lk)("span",f,(0,r.v_)(o.loginUser.firstname)+" "+(0,r.v_)(o.loginUser.lastname),1)]),a.isOpen?((0,s.uX)(),(0,s.CE)("div",b,[(0,s.Lk)("div",x,[(0,s.Lk)("a",{onClick:t[1]||(t[1]=(...e)=>l.profile&&l.profile(...e)),class:"block px-4 cursor-pointer text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"}," My profile "),(0,s.Lk)("a",{onClick:t[2]||(t[2]=(...e)=>l.logout&&l.logout(...e)),class:"block px-4 cursor-pointer text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"}," Logout ")])])):(0,s.Q3)("",!0)])}n(4114);var y=n(7369);function k(e,t){return(0,s.uX)(),(0,s.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,s.Lk)("path",{"fill-rule":"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z","clip-rule":"evenodd"})])}var C=n(6826),L={name:"ProfileComponent",components:{UserCircleIcon:k},props:{label:String},data(){return{isOpen:!1}},setup(){const e=(0,C.n)(),t=e.loginUser;return{loginUser:t}},methods:{async profile(){y.A.push("/my-profile/"+this.loginUser.id)},async logout(){localStorage.removeItem("authToken"),y.A.push("/")}}},E=n(1241);const P=(0,E.A)(L,[["render",w]]);var A=P,D={name:"HeaderView",components:{Bars3CenterLeftIcon:g.A,BellIcon:m,EnvelopeIcon:p,ProfileComponent:A},props:{headerTitle:String}};const I=(0,E.A)(D,[["render",h]]);var S=I},8752:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var s=n(6768),r=n(4232);const o={class:"flex flex-col space-y-4 flex-1"},a={class:"flex flex-col space-y-4"},l={class:"flex sm:flex-row flex-col sm:justify-between sm:items-center items-start"},i={key:1,class:"rounded-md border-2 border-white-600 shadow-sm text-abbey-500"},d={class:""},c=(0,s.Fv)('<div class="flex bg-mercury-500 p-3 pt-2 pb-2 rounded-t-sm uppercase text-xs font-bold"><div class="w-6/12 p-1">Event Title</div><div class="w-2/12 p-1">Date</div><div class="w-2/12 p-1">Status</div><div class="w-2/12 p-1 text-end">Action</div></div>',1),u={class:"sm:w-6/12 w-full p-1 sm:font-light font-bold"},h={class:"sm:w-2/12 w-full p-1"},g={class:"sm:w-2/12 w-full p-1"},m={class:"flex sm:w-2/12 w-full p-1 sm:justify-end justify-start"},p={class:""};function v(e,t,n,v,f,b){const x=(0,s.g2)("HeaderView"),w=(0,s.g2)("search-component"),y=(0,s.g2)("router-link"),k=(0,s.g2)("SpinnerComponent"),C=(0,s.g2)("DropdownComponent"),L=(0,s.g2)("pagination-component"),E=(0,s.g2)("delete-confirmation-modal");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(x,{headerTitle:f.headerTitle},null,8,["headerTitle"]),(0,s.Lk)("div",a,[(0,s.Lk)("div",l,[(0,s.bF)(w,{onSearch:b.handleSearch},null,8,["onSearch"]),v.permissions.includes("ADD_EVENT")?((0,s.uX)(),(0,s.Wv)(y,{key:0,to:{name:"AddEvent"},class:"mt-2 px-4 py-2 text-white-200 bg-daintree-600 hover:bg-daintree-400 rounded-md"},{default:(0,s.k6)((()=>[(0,s.eW)(" Add Event")])),_:1})):(0,s.Q3)("",!0)]),f.isLoading?((0,s.uX)(),(0,s.Wv)(k,{key:0})):((0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("div",d,[c,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(f.events,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"flex sm:flex-row flex-col p-3 pt-2 pb-2 text-sm items-center border-t-2 border-mercury-500",key:e.id},[(0,s.Lk)("div",u,(0,r.v_)(e.event),1),(0,s.Lk)("div",h,(0,r.v_)(b.formatDate(e.start_date)),1),(0,s.Lk)("div",g,(0,r.v_)(b.formartStatus(e.start_date)),1),(0,s.Lk)("div",m,[(0,s.bF)(C,{onView:t=>b.handleView(e.id),onEdit:t=>b.handleEdit(e.id),onDelete:t=>b.handleDelete(e.id)},null,8,["onView","onEdit","onDelete"])])])))),128))])])),(0,s.Lk)("div",p,[(0,s.bF)(L,{currentPage:f.currentPage,totalPages:f.totalPages,onPageChange:b.handlePageChange},null,8,["currentPage","totalPages","onPageChange"])])]),(0,s.bF)(E,{show:f.showDeleteModal,onConfirmed:t[0]||(t[0]=e=>b.deleteEvent(f.deleteEventId)),onCanceled:b.cancelDelete},null,8,["show","onCanceled"])])}n(4114);var f=n(3664),b=n(6695),x=n(9288),w=n(133),y=n(2521),k=n(7023);const C=e=>((0,s.Qi)("data-v-6d1c7904"),e=e(),(0,s.jt)(),e),L={class:"relative inline-block text-left"},E=C((()=>(0,s.Lk)("svg",{class:"-mr-1 ml-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,s.Lk)("path",{"fill-rule":"evenodd",d:"M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))),P={key:0,class:"action-content right-0 mt-2 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5"},A={class:"py-1 w-full",role:"none"};function D(e,t,n,r,o,a){return(0,s.uX)(),(0,s.CE)("div",L,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.toggleDropdown&&a.toggleDropdown(...e)),class:"inline-flex justify-center w-full rounded-md border border-shuttle-gray-200 bg-shuttle-gray-200 shadow-sm px-4 py-2 text-sm font-bold text-gray-700 hover:text-abbey-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[(0,s.eW)(" Actions "),E]),o.isOpen?((0,s.uX)(),(0,s.CE)("div",P,[(0,s.Lk)("div",A,[(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.viewItem&&a.viewItem(...e)),class:"w-full px-4 py-1 text-sm text-gray-700 hover:text-bondi-blue-500 border-b border-shuttle-gray-200",role:"menuitem",tabindex:"-1",id:"menu-item-1"},"View"),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>a.editItem&&a.editItem(...e)),class:"w-full px-4 py-1 text-sm text-gray-700 hover:text-bondi-blue-500 border-b border-shuttle-gray-200",role:"menuitem",tabindex:"-1",id:"menu-item-1"},"Edit"),(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>a.deleteItem&&a.deleteItem(...e)),class:"w-full px-4 py-1 text-sm text-gray-700 hover:text-bondi-blue-500",role:"menuitem",tabindex:"-1",id:"menu-item-0"},"Delete")])])):(0,s.Q3)("",!0)])}var I={data(){return{isOpen:!1}},methods:{toggleDropdown(){this.isOpen=!this.isOpen},viewItem(){this.$emit("view"),this.isOpen=!1},editItem(){this.$emit("edit"),this.isOpen=!1},deleteItem(){this.$emit("delete"),this.isOpen=!1}}},S=n(1241);const X=(0,S.A)(I,[["render",D],["__scopeId","data-v-6d1c7904"]]);var _=X,M=n(6826),F={name:"EventsView",components:{PaginationComponent:b.A,SearchComponent:x.A,HeaderView:f.A,SpinnerComponent:y.A,DeleteConfirmationModal:k.A,DropdownComponent:_},data(){return{headerTitle:"Events",events:{},isLoading:!0,showDeleteModal:!1,deleteEventId:null,currentPage:1,totalPages:"",pageSize:"10",searchPhrase:""}},mounted(){this.getEvents()},setup(){const e=(0,M.n)(),t=e.permissions;return{permissions:t}},methods:{async getEvents(){try{const e=await(0,w.Fd)("events",this.currentPage,this.pageSize,this.searchPhrase);this.events=e.data,this.totalPages=e.pages,this.isLoading=!1}catch(e){console.error("Error fetching events:",e),this.isLoading=!1}},async handleSearch(e){this.searchPhrase=e,this.getEvents()},async handlePageChange(e){this.currentPage=e,this.getEvents()},async deleteEvent(e){this.isLoading=!0;try{await(0,w.LD)("events",e);const t=this.events.findIndex((t=>t.id===e));-1!==t&&this.events.splice(t,1),this.showDeleteModal=!1,this.isLoading=!1}catch(t){console.error("Error fetching events:",t),this.isLoading=!1,this.showDeleteModal=!1}},showDeleteConfirmation(e){this.deleteEventId=e,this.showDeleteModal=!0},cancelDelete(){this.showDeleteModal=!1},getRowClass(e){return e%2===0?"bg-st-tropaz-100":"bg-shuttle-gray-50"},handleView(e){this.$router.push({name:"Event",params:{id:e}})},handleEdit(e){this.$router.push({name:"EditEvent",params:{id:e}})},handleDelete(e){this.deleteEventId=e,this.showDeleteModal=!0},formatDate(e){const t=new Date(e),n=t.toLocaleString("en-UK",{day:"2-digit",month:"2-digit",year:"numeric"});return n},formartStatus(e){const t=new Date(e),n=new Date;return t.getTime()>n.getTime()?"Active":"Expired"}}};const V=(0,S.A)(F,[["render",v]]);var $=V},5246:function(e,t,n){n.d(t,{A:function(){return r}});var s=n(6768);function r(e,t){return(0,s.uX)(),(0,s.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,s.Lk)("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}}}]);
//# sourceMappingURL=484.f4a4f5d7.js.map