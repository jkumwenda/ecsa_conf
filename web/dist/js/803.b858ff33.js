"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[803],{3672:function(e,s,t){t.d(s,{A:function(){return I}});var i=t(6768),r=t(4232);const o={class:"flex flex-row p-4 bg-catalina-blue rounded-2xl border-b-4 border-abbey-400"},a={class:"flex flex-row flex-1 justify-between space-x-2 items-center"},n={class:"flex flex-row items-center font-bold space-x-4"},l={class:"text-xl text-abbey-600"},d={class:"flex items-center space-x-4 justify-end"},c={class:"flex flex-row items-center"},u={class:"flex flex-row items-center"};function h(e,s,t,h,g,p){const A=(0,i.g2)("Bars3CenterLeftIcon"),f=(0,i.g2)("BellIcon"),x=(0,i.g2)("EnvelopeIcon"),m=(0,i.g2)("ProfileComponent");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.Lk)("div",a,[(0,i.Lk)("div",n,[(0,i.bF)(A,{class:"h-8 w-8 text-bondi-blue-500"}),(0,i.Lk)("span",l,(0,r.v_)(t.headerTitle),1)]),(0,i.Lk)("div",d,[(0,i.Lk)("div",c,[(0,i.bF)(f,{class:"w-6 h-6 text-bondi-blue-500"})]),(0,i.Lk)("div",u,[(0,i.bF)(x,{class:"w-6 h-6 text-bondi-blue-500"})]),(0,i.bF)(m,{label:`${e.firstname} ${e.lastname}`},null,8,["label"])])])])}function g(e,s){return(0,i.uX)(),(0,i.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75H12a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})])}function p(e,s){return(0,i.uX)(),(0,i.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z","clip-rule":"evenodd"})])}function A(e,s){return(0,i.uX)(),(0,i.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,i.Lk)("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),(0,i.Lk)("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"})])}const f={class:"relative inline-block text-left"},x={class:"text-sm text-catskill-white-500"},m={key:0,class:"origin-top-right absolute right-0 mt-2 w-32 rounded-xl shadow-lg bg-bondi-blue-50"},b={class:"py-2 space-y-2",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"};function v(e,s,t,o,a,n){const l=(0,i.g2)("UserCircleIcon");return(0,i.uX)(),(0,i.CE)("div",f,[(0,i.Lk)("div",{onClick:s[0]||(s[0]=e=>a.isOpen=!a.isOpen),class:"flex flex-row items-center space-x-2 cursor-pointer"},[(0,i.bF)(l,{class:"w-8 h-8 text-bondi-blue-700"}),(0,i.Lk)("span",x,(0,r.v_)(o.loginUser.firstname)+" "+(0,r.v_)(o.loginUser.lastname),1)]),a.isOpen?((0,i.uX)(),(0,i.CE)("div",m,[(0,i.Lk)("div",b,[(0,i.Lk)("a",{onClick:s[1]||(s[1]=(...e)=>n.profile&&n.profile(...e)),class:"block px-4 cursor-pointer text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"}," My profile "),(0,i.Lk)("a",{onClick:s[2]||(s[2]=(...e)=>n.logout&&n.logout(...e)),class:"block px-4 cursor-pointer text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"}," Logout ")])])):(0,i.Q3)("",!0)])}t(4114);var w=t(1617);function L(e,s){return(0,i.uX)(),(0,i.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z","clip-rule":"evenodd"})])}var k=t(6826),y={name:"ProfileComponent",components:{UserCircleIcon:L},props:{label:String},data(){return{isOpen:!1}},setup(){const e=(0,k.n)(),s=e.loginUser;return{loginUser:s}},methods:{async profile(){w.A.push("/my-profile/"+this.loginUser.id)},async logout(){localStorage.removeItem("authToken"),w.A.push("/")}}},C=t(1241);const D=(0,C.A)(y,[["render",v]]);var E=D,B={name:"HeaderView",components:{Bars3CenterLeftIcon:g,BellIcon:p,EnvelopeIcon:A,ProfileComponent:E},props:{headerTitle:String}};const P=(0,C.A)(B,[["render",h]]);var I=P},6741:function(e,s,t){t.r(s),t.d(s,{default:function(){return T}});var i=t(6768),r=t(4232),o=t(1120);const a={class:"flex flex-col space-y-4 flex-1"},n={key:1,class:"flex flex-col space-y-4"},l={class:"flex flex-row space-x-4"},d={class:"flex flex-col space-y-4 w-4/12 items-center text-center space-x-4 border border-abbey-100 p-4 px-4 rounded-2xl shadow-sm"},c=(0,i.Lk)("div",{class:"flex"},[(0,i.Lk)("img",{alt:"Vue logo",class:"object-cover rounded-full",src:o})],-1),u={class:"flex flex-col space-y-2"},h={class:"text-xl font-semibold"},g=["onClick"],p=["href"],A={key:0,class:"p-4 m-6 rounded-xl text-abbey-100 py-2 text-sm bg-mountain-meadow-500"},f={class:"flex space-x-4 w-8/12"},x={class:"flex flex-col space-y-4 flex-1 p-4 px-4 border border-abbey-100 rounded-2xl shadow-sm"},m=(0,i.Lk)("h1",{class:"text-xl font-bold"},"Roles",-1),b={class:"flex flex-1 space-y-4 flex-col"},v={class:"space-y-2"},w=(0,i.Lk)("div",{class:"border-b border-b-abbey-100"},"Active roles (click to remove)",-1),L={class:"flex flex-1 flex-wrap"},k=["onClick"],y={class:"space-y-2"},C=(0,i.Lk)("div",{class:"border-b border-b-abbey-100"},"Available roles (click to add)",-1),D={class:"flex flex-1 flex-wrap"},E=["onClick"];function B(e,s,t,o,B,P){const I=(0,i.g2)("HeaderView"),M=(0,i.g2)("SpinnerComponent");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(I,{headerTitle:B.headerTitle},null,8,["headerTitle"]),B.isLoading?((0,i.uX)(),(0,i.Wv)(M,{key:0})):((0,i.uX)(),(0,i.CE)("div",n,[(0,i.Lk)("div",l,[(0,i.Lk)("div",d,[c,(0,i.Lk)("div",u,[(0,i.Lk)("p",h,(0,r.v_)(B.user.firstname)+" "+(0,r.v_)(B.user.lastname),1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.assignedPositions,(e=>((0,i.uX)(),(0,i.CE)("p",{class:"text-normal",key:e.id,onClick:s=>P.removePosition(e.id)},(0,r.v_)(e.position),9,g)))),128)),(0,i.Lk)("a",{href:"mailto:"+B.user.email,class:"text-blue-500 hover:underline text-bondi-blue-500"},(0,r.v_)(B.user.email),9,p),(0,i.Lk)("div",null,[(0,i.Lk)("button",{onClick:s[0]||(s[0]=e=>P.resetPassword()),class:"bg-bondi-blue-300 hover:bg-bondi-blue-500 text-bondi-blue-800 rounded-xl px-4 py-2"}," Reset Password ")]),B.message?((0,i.uX)(),(0,i.CE)("div",A,(0,r.v_)(B.message),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",f,[(0,i.Lk)("div",x,[m,(0,i.Lk)("div",b,[(0,i.Lk)("div",v,[w,(0,i.Lk)("div",L,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(B.assignedRoles,(e=>((0,i.uX)(),(0,i.CE)("button",{class:"p-4 py-1 text-sm m-1 bg-bondi-blue-300 text-bondi-blue-800 rounded-xl",key:e.id,onClick:s=>P.removeRole(e.id)},(0,r.v_)(e.role),9,k)))),128))])]),(0,i.Lk)("div",y,[C,(0,i.Lk)("div",D,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(P.filteredRoles,(e=>((0,i.uX)(),(0,i.CE)("button",{class:"p-4 py-1 text-sm m-1 bg-bondi-blue-300 text-bondi-blue-800 rounded-xl",key:e.id,onClick:s=>P.assignRole(e.id)},(0,r.v_)(e.role),9,E)))),128))])])])])])])]))])}var P=t(3672),I=t(133),M=t(2521),R=t(6826),F={name:"UserView",components:{SpinnerComponent:M.A,HeaderView:P.A},data(){return{headerTitle:"User profile",user:[],id:this.$route.params.id,isLoading:!0,roles:[],departments:[],positions:[],assignedRoles:[],signatures:[],roleData:{},positionData:{},departmentData:{},message:"",userPasswordData:{id:""},currentPage:1,totalPages:"",pageSize:"10",searchPhrase:"",showUploadSignatureFileModal:!1}},mounted(){this.getUser(),this.getRoles(),this.getDepartments(),this.getPositions()},setup(){const e=(0,R.n)(),s=e.permissions;return{permissions:s}},computed:{filteredRoles(){return this.roles.filter((e=>{const s=e.id;return!this.assignedRoles.some((e=>e.role_id===s))}))},filteredPositions(){return this.positions.filter((e=>{const s=e.id;return!this.assignedPositions.some((e=>e.position_id===s))}))},filteredDepartments(){return this.departments.filter((e=>{const s=e.id;return!this.assignedDepartments.some((e=>e.department_id===s))}))}},methods:{async getUser(){try{const e=await(0,I.Gk)("users",this.id);this.user=e.user,this.assignedRoles=e.roles,this.signatures=e.signatures,this.isLoading=!1}catch(e){console.error("Error fetching users:",e),this.isLoading=!1}},async getRoles(){try{const e=await(0,I.Fd)("roles",this.currentPage,this.pageSize,this.searchPhrase);this.roles=e.data,this.isLoading=!1}catch(e){console.error("Error fetching roles:",e),this.isLoading=!1}},async getDepartments(){try{const e=await(0,I.Fd)("departments",this.currentPage,this.pageSize,this.searchPhrase);this.departments=e.data,this.isLoading=!1}catch(e){console.error("Error fetching departments:",e),this.isLoading=!1}},async getPositions(){try{const e=await(0,I.Fd)("positions",this.currentPage,this.pageSize,this.searchPhrase);this.positions=e.data,this.isLoading=!1}catch(e){console.error("Error fetching positions:",e),this.isLoading=!1}},async assignRole(e){this.roleData={user_id:this.id,role_id:e},this.isLoading=!0;try{const e=await(0,I.wE)("users/roles/",this.roleData);this.user_role=e.data,this.isLoading=!1,this.getUser()}catch(s){console.error("Error fetching users:",s),this.isLoading=!1}},async removeRole(e){this.isLoading=!0;try{await(0,I.LD)("users/roles",e);const s=this.assignedRoles.findIndex((s=>s.id===e));-1!==s&&this.assignedRoles.splice(s,1),this.isLoading=!1}catch(s){console.error("Error fetching users:",s),this.isLoading=!1}},async assignDepartment(e){this.departmentData={user_id:this.id,department_id:e},this.isLoading=!0;try{const e=await(0,I.wE)("users/departments/",this.departmentData);this.user_department=e.data,this.isLoading=!1,this.getUser()}catch(s){console.error("Error fetching users:",s),this.isLoading=!1}},async removeDepartment(e){this.isLoading=!0;try{await(0,I.LD)("users/departments",e);const s=this.assignedDepartments.findIndex((s=>s.id===e));-1!==s&&this.assignedDepartments.splice(s,1),this.isLoading=!1}catch(s){console.error("Error fetching users:",s),this.isLoading=!1}},async assignPosition(e){this.positionData={user_id:this.id,position_id:e},this.isLoading=!0;try{const e=await(0,I.wE)("users/positions/",this.positionData);this.user_position=e.data,this.isLoading=!1,this.getUser()}catch(s){console.error("Error fetching users:",s),this.isLoading=!1}},async removePosition(e){this.isLoading=!0;try{await(0,I.LD)("users/positions",e);const s=this.assignedPositions.findIndex((s=>s.id===e));-1!==s&&this.assignedPositions.splice(s,1),this.isLoading=!1}catch(s){console.error("Error fetching users:",s),this.isLoading=!1}},async resetPassword(){this.userPasswordData.id=this.id,this.isLoading=!0;try{const e=await(0,I.fk)("users/password",this.id);this.response=e,this.message="Password updated successfully",this.isLoading=!1}catch(e){console.error("Error fetching users:",e),this.isLoading=!1}}}},H=t(1241);const U=(0,H.A)(F,[["render",B]]);var T=U},1120:function(e){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAZABkAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/wgALCADIAMgBAREA/8QAGwABAAMAAwEAAAAAAAAAAAAAAAQFBgECAwf/2gAIAQEAAAAA+zAAAAAAAAAAAAAAAAAAIsDpMsAAAOtDWCTezQAAz9YDtpZgABGyoCRqwACpogDVyAAFLTAGplAAKugAdtf2AAQM2A508sAB4ZTgD11vIABm4AOb21AAHnlPMLa9AABT0gaSeAACNlQ0s4AAFbngtb4AAPDM+Ic6KwAAR6yp6gc2l16AHFRVeIAO1jaTAdM5CAACdofQZuAAABM03KvzgAABf2jO1wAABM0//8QAMxAAAgECAwYEBAUFAAAAAAAAAQIDBBEABSESMDFAQVEgIlJxECMyYRMUgZHBM2BictH/2gAIAQEAAT8A/u6ozGmprh5Lt6V1OHz4D+nBf/ZsDPnv5oFt9mxT5xTzEK942Pq4fvjjybusaFnICgXJOK7NnmJjgJSPhfqfDBmFTT2CSkr6TqMUOYR1i2PllHFe/tyWbVxnlMCH5aHW3U+NHaNw6EhhqCMZfWisgubCRdGH88hXz/l6OSQHzWsPc7mhqTS1SSX8vBvbANxcb/PXtBEndr/tuqFzJQwseOzv8+veDtrusuUrl8IPpvv88jLUqOB9Da/ruUXbdVHU2wihEVBwUW3+bymOgYAX2zs+25BIIINiMZa8klDG0pJY31Pbf1kAqaWSMjW1x74IsSDxG4poGqahIl4k6nsMKoRFUcALDkM0pGp6kuB8uQ3B+/bxgFiABcngBjKcveAmaXRiLBew5GaJZ4mjcXDC3tiaJoJmicaqbeLJKYPK07DRNF9+Tzumuq1CjUeVv48WTps5ep9RJ5PMVDZfMD6b+LKHDZeg9JIPJ5zOI6T8IHzSG36eLJakRzNAx0fVffkqqripI9qQ69F6nFTUvVTGR+vAdh4lJVgymxGoOMvzJKpAjkLMOI77+aupoPrlW/YanFTnjNdadLf5N/zEkjyuXkYsx6ncAkG4Njijzl47JUAuvRhxGIZ4qhNqJww+26ZgqlmIAHEnFXnQUlKZQx9Z4Ylqp5yTJKx+19N6kjxsGRipHUHEGdzR2EyiQd+BxT5nTVGgfYb0tp45ZUhjaSRrKOJxXZhJVuQLrEOC9/fkqPM5qVgrEvF6T09sQzR1EQkja6nw5pXGqm2EPykOn3PflMvrWpJtbmJvqH84BDKGBuDqD8c3qTBS7CmzSafp15bJakyQNCxuY+Ht8c6l263Y6IoHLZXP+BXJc+V/Kfh//9k="}}]);
//# sourceMappingURL=803.b858ff33.js.map