"use strict";(self["webpackChunkecsaconm_event"]=self["webpackChunkecsaconm_event"]||[]).push([[959],{9162:function(e,o,t){t.d(o,{A:function(){return D}});var l=t(641),s=t(33);const n={class:"flex flex-row p-4 bg-catalina-blue rounded-2xl border-b-4 border-abbey-400"},r={class:"flex flex-row flex-1 justify-between space-x-2 items-center"},a={class:"flex flex-row items-center font-bold space-x-4"},i={class:"sm:text-xl text-md text-abbey-600"},d={class:"flex items-center space-x-4 justify-end"};function c(e,o,t,c,u,p){const b=(0,l.g2)("Bars3CenterLeftIcon"),h=(0,l.g2)("EnvelopeIcon"),v=(0,l.g2)("router-link"),f=(0,l.g2)("ProfileComponent");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",r,[(0,l.Lk)("div",a,[(0,l.bF)(b,{class:"h-8 w-8 text-bondi-blue-500"}),(0,l.Lk)("span",i,(0,s.v_)(t.headerTitle),1)]),(0,l.Lk)("div",d,[(0,l.bF)(v,{to:{name:"Contacts"},class:"flex flex-row items-center"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{class:"w-6 h-6 text-bondi-blue-500"})])),_:1}),(0,l.bF)(f,{label:`${e.firstname} ${e.lastname}`},null,8,["label"])])])])}var u=t(2690);function p(e,o){return(0,l.uX)(),(0,l.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,l.Lk)("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),(0,l.Lk)("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"})])}const b={class:"relative inline-block text-left"},h={class:"text-sm text-catskill-white-500"},v={key:0,class:"origin-top-right absolute right-0 mt-2 w-32 rounded-xl shadow-lg bg-bondi-blue-50"},f={class:"py-2 space-y-2",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu"};function k(e,o,t,n,r,a){const i=(0,l.g2)("UserCircleIcon");return(0,l.uX)(),(0,l.CE)("div",b,[(0,l.Lk)("div",{onClick:o[0]||(o[0]=e=>r.isOpen=!r.isOpen),class:"flex flex-row items-center space-x-2 cursor-pointer"},[(0,l.bF)(i,{class:"w-8 h-8 text-bondi-blue-700"}),(0,l.Lk)("span",h,(0,s.v_)(n.loginUser.firstname)+" "+(0,s.v_)(n.loginUser.lastname),1)]),r.isOpen?((0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("div",f,[(0,l.Lk)("a",{onClick:o[1]||(o[1]=(...e)=>a.profile&&a.profile(...e)),class:"block px-4 cursor-pointer text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"}," My profile "),(0,l.Lk)("a",{onClick:o[2]||(o[2]=(...e)=>a.logout&&a.logout(...e)),class:"block px-4 cursor-pointer text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"}," Logout ")])])):(0,l.Q3)("",!0)])}t(4114);var x=t(7040);function m(e,o){return(0,l.uX)(),(0,l.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,l.Lk)("path",{"fill-rule":"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z","clip-rule":"evenodd"})])}var g=t(6826),w={name:"ProfileComponent",components:{UserCircleIcon:m},props:{label:String},data(){return{isOpen:!1}},setup(){const e=(0,g.n)(),o=e.loginUser;return{loginUser:o}},methods:{async profile(){x.A.push("/my-profile/"+this.loginUser.id)},async logout(){localStorage.removeItem("authToken"),x.A.push("/")}}},y=t(6262);const L=(0,y.A)(w,[["render",k]]);var C=L,_={name:"HeaderView",components:{Bars3CenterLeftIcon:u.A,EnvelopeIcon:p,ProfileComponent:C},props:{headerTitle:String}};const E=(0,y.A)(_,[["render",c]]);var D=E},2593:function(e,o,t){t.r(o),t.d(o,{default:function(){return ye}});var l=t(641),s=t(33);const n={class:"flex flex-col space-y-3 flex-1"},r={key:1,class:"rounded-2xl border border-mercury-500 p-3"},a={class:"flex flex-col space-y-1"},i={class:"text-3xl font-semibold font-roboto-thin text-bondi-blue-500"},d={class:"flex text-sm items-center space-x-1"},c={class:"rounded-sm flex flex-1 py-1 space-x-1"},u={class:"flex text-sm items-center space-x-1"},p={class:"rounded-sm flex flex-1 py-1 space-x-1"},b=(0,l.Lk)("span",{class:"font-bold"},":",-1),h={class:"flex text-md space-x-1"},v={class:"rounded-sm flex flex-1 py-1 space-x-1"},f=(0,l.Lk)("span",{class:"font-bold"},":",-1),k={class:"flex text-sm items-center space-x-1"},x={class:"rounded-sm flex flex-row flex-1 items-center py-1 space-x-1"},m=(0,l.Lk)("span",{class:"font-bold"},":",-1),g=(0,l.Lk)("div",{class:"flex flex-row items-baseline text-2xl font-roboto-light font-semibold text-abbey-500"}," Event resources and links ",-1),w={class:"flex space-x-2"},y={class:"rounded-2xl border border-white-600 shadow-sm p-4 text-abbey-500 flex flex-col space-y-2"},L={key:0},C=["href","download"],_={key:1,class:"list-outside hover:list-inside list-decimal"},E=["href"];function D(e,o,t,D,A,M){const U=(0,l.g2)("HeaderView"),X=(0,l.g2)("SpinnerComponent"),F=(0,l.g2)("UserGroupIcon"),I=(0,l.g2)("MapPinIcon"),S=(0,l.g2)("CalendarDaysIcon"),R=(0,l.g2)("event-resource-modal"),P=(0,l.g2)("event-link-modal");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(U,{headerTitle:A.headerTitle},null,8,["headerTitle"]),A.isLoading?((0,l.uX)(),(0,l.Wv)(X,{key:0})):((0,l.uX)(),(0,l.CE)("div",r,[(0,l.Lk)("div",a,[(0,l.Lk)("div",i,[(0,l.Lk)("span",null,(0,s.v_)(A.event.event),1)]),(0,l.Lk)("div",d,[(0,l.Lk)("div",c,[(0,l.Lk)("span",null,(0,s.v_)(A.event.description),1)])]),(0,l.Lk)("div",u,[(0,l.Lk)("div",p,[(0,l.bF)(F,{class:"w-5 h-5 text-bondi-blue-500"}),b,(0,l.Lk)("span",null,(0,s.v_)(A.event.organiser),1)])]),(0,l.Lk)("div",h,[(0,l.Lk)("div",v,[(0,l.bF)(I,{class:"w-5 h-5 text-bondi-blue-500"}),f,(0,l.Lk)("span",null,(0,s.v_)(A.event.location),1)])]),(0,l.Lk)("div",k,[(0,l.Lk)("div",x,[(0,l.bF)(S,{class:"w-5 h-5 text-bondi-blue-500"}),m,(0,l.Lk)("span",null,(0,s.v_)(M.formatDate(A.event.start_date))+" - "+(0,s.v_)(M.formatDate(A.event.end_date)),1)])])])])),g,(0,l.Lk)("div",w,[D.permissions.includes("ADD_EVENT")?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:o[0]||(o[0]=(...e)=>M.openResourceUploadModal&&M.openResourceUploadModal(...e)),class:"mt-2 px-4 py-2 text-white-200 bg-daintree-600 hover:bg-daintree-400 rounded-md cursor-pointer"}," Add Resource")):(0,l.Q3)("",!0),D.permissions.includes("ADD_EVENT")?((0,l.uX)(),(0,l.CE)("button",{key:1,onClick:o[1]||(o[1]=(...e)=>M.openLinkModal&&M.openLinkModal(...e)),class:"mt-2 px-4 py-2 text-white-200 bg-daintree-600 hover:bg-daintree-400 rounded-md cursor-pointer"}," Add Link")):(0,l.Q3)("",!0)]),(0,l.Lk)("div",y,[A.resources.length>0?((0,l.uX)(),(0,l.CE)("div",L,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(A.resources,(o=>((0,l.uX)(),(0,l.CE)("span",{key:o.id},[(0,l.Lk)("a",{class:"text-dodger-blue-600 hover:text-dodger-blue-400",href:M.getFullImageUrl(o.filepath),download:e.file_name},(0,s.v_)(o.file_name),9,C)])))),128))])):(0,l.Q3)("",!0),A.links.length>0?((0,l.uX)(),(0,l.CE)("ul",_,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(A.links,(e=>((0,l.uX)(),(0,l.CE)("li",{class:"flex flex.row",key:e.id},[(0,l.Lk)("a",{class:"text-dodger-blue-600 hover:text-dodger-blue-400",href:e.link},(0,s.v_)(e.link_name),9,E)])))),128))])):(0,l.Q3)("",!0)]),(0,l.bF)(R,{show:A.showResourceModal,onClose:M.closeResourceUploadModal,event_id:e.event_id},null,8,["show","onClose","event_id"]),(0,l.bF)(P,{show:A.showLinkModal,onClose:M.closeLinkModal,event_id:e.event_id},null,8,["show","onClose","event_id"])])}var A=t(133),M=t(1310),U=t(6390),X=t(5155),F=t(9162),I=t(2521),S=t(6826),R=t(3751);const P={key:0,class:"fixed inset-0 flex items-center justify-center z-50 overflow-auto"},V={class:"flex flex-col border-2 border-bondi-blue-500 border-t-8 bg-white-100 rounded-xl shadow-lg sm:w-5/12 w-11/12 max-h-[90vh] overflow-y-auto z-50"},T={class:"flex flex-row items-center justify-between font-bold text-lg text-abbey-500 border-b-2 p-4 px-6 border-bondi-blue-500"},$=(0,l.Lk)("div",null,"Upload Event Resource",-1),q={title:"Cancel Registration",class:"p-1 border border-abbey-600 rounded-full cursor-pointer"},Q={class:"flex flex-col p-6 space-y-4"},Z={class:"block"},B={class:"block"},j={class:"block"},z=(0,l.Lk)("option",{value:"",disabled:"",selected:""},"--Access level--",-1),O=(0,l.Lk)("option",{value:"public"},"public",-1),N=(0,l.Lk)("option",{value:"private"},"private",-1),G=[z,O,N],H=(0,l.Lk)("div",{class:"flex flex-row space-x-4"},[(0,l.Lk)("button",{type:"submit",class:"mt-2 px-4 py-2 text-white-100 bg-bondi-blue hover:bg-bondi-blue-400 rounded-2xl"}," Save ")],-1);function J(e,o,t,s,n,r){const a=(0,l.g2)("XCircleIcon"),i=(0,l.g2)("SpinnerComponent");return t.show?((0,l.uX)(),(0,l.CE)("div",P,[(0,l.Lk)("div",V,[(0,l.Lk)("div",T,[$,(0,l.Lk)("span",q,[(0,l.bF)(a,{class:"w-5 h-5 text-abbey-800",onClick:r.close},null,8,["onClick"])])]),n.isLoading?((0,l.uX)(),(0,l.Wv)(i,{key:0})):(0,l.Q3)("",!0),(0,l.Lk)("div",Q,[(0,l.Lk)("form",{class:"flex flex-col space-y-4 p-4 px-6",onSubmit:o[3]||(o[3]=(0,R.D$)(((...e)=>r.uploadEventResource&&r.uploadEventResource(...e)),["prevent"])),method:"POST"},[(0,l.Lk)("label",Z,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>n.resourceData.resource_title=e),class:"mt-2 px-3 py-3 bg-white border border-1 shadow-sm border-abbey-400 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-2xl sm:text-sm focus:ring-1",placeholder:"Resource title",required:""},null,512),[[R.Jo,n.resourceData.resource_title]])]),(0,l.Lk)("label",B,[(0,l.Lk)("input",{type:"file",onChange:o[1]||(o[1]=(...e)=>r.handleFileChange&&r.handleFileChange(...e)),class:"mt-2 px-3 py-3 bg-white border border-1 shadow-sm border-abbey-400 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-2xl sm:text-sm focus:ring-1"},null,32)]),(0,l.Lk)("label",j,[(0,l.bo)((0,l.Lk)("select",{name:"participant_category",class:"mt-2 px-3 py-3 pr-4 bg-white border border-1 shadow-sm border-abbey-400 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-2xl sm:text-sm focus:ring-1","onUpdate:modelValue":o[2]||(o[2]=e=>n.resourceData.access_level=e),required:""},G,512),[[R.u1,n.resourceData.access_level]])]),H],32)])])])):(0,l.Q3)("",!0)}var K=t(1709),W={components:{XCircleIcon:K.A,SpinnerComponent:I.A},data(){return{resourceData:{resource_title:"",file:null,access_level:""},isLoading:!1,message:""}},props:{show:{type:Boolean,required:!0},event_id:{type:Number,required:!0}},methods:{handleFileChange(e){this.resourceData.file=e.target.files[0]},async uploadEventResource(){if(this.isLoading=!0,!this.resourceData.file)return alert("Please select a file!"),void(this.isLoading=!1);const e=new FormData;e.append("resource_title",this.resourceData.resource_title),e.append("file",this.resourceData.file),e.append("access_level",this.resourceData.access_level),e.append("event_id",this.event_id);try{const o=await(0,A.wE)("events/upload_file/",e);this.file_data=o,this.isLoading=!1,this.$emit("close")}catch(o){console.error("Error uploading file:",o),this.isLoading=!1}},close(){this.$emit("close")}},watch:{show(e){document.body.style.overflow=e?"hidden":""}},mounted(){this.show&&(document.body.style.overflow="hidden")}},Y=t(6262);const ee=(0,Y.A)(W,[["render",J]]);var oe=ee;const te={key:0,class:"fixed inset-0 flex items-center justify-center z-50 overflow-auto"},le={class:"flex flex-col border-2 border-bondi-blue-500 border-t-8 bg-white-100 rounded-xl shadow-lg sm:w-5/12 w-11/12 max-h-[90vh] overflow-y-auto z-50"},se={class:"flex flex-row items-center justify-between font-bold text-lg text-abbey-500 border-b-2 p-4 px-6 border-bondi-blue-500"},ne=(0,l.Lk)("div",null,"Upload Event link",-1),re={title:"Cancel Registration",class:"p-1 border border-abbey-600 rounded-full cursor-pointer"},ae={class:"flex flex-col p-6 space-y-4"},ie={class:"block"},de={class:"block"},ce={class:"block"},ue=(0,l.Lk)("option",{value:"",disabled:"",selected:""},"--Access level--",-1),pe=(0,l.Lk)("option",{value:"public"},"public",-1),be=(0,l.Lk)("option",{value:"private"},"private",-1),he=[ue,pe,be],ve=(0,l.Lk)("div",{class:"flex flex-row space-x-4"},[(0,l.Lk)("button",{type:"submit",class:"mt-2 px-4 py-2 text-white-100 bg-bondi-blue hover:bg-bondi-blue-400 rounded-2xl"}," Save ")],-1);function fe(e,o,t,s,n,r){const a=(0,l.g2)("XCircleIcon"),i=(0,l.g2)("SpinnerComponent");return t.show?((0,l.uX)(),(0,l.CE)("div",te,[(0,l.Lk)("div",le,[(0,l.Lk)("div",se,[ne,(0,l.Lk)("span",re,[(0,l.bF)(a,{class:"w-5 h-5 text-abbey-800",onClick:r.close},null,8,["onClick"])])]),n.isLoading?((0,l.uX)(),(0,l.Wv)(i,{key:0})):(0,l.Q3)("",!0),(0,l.Lk)("div",ae,[(0,l.Lk)("form",{class:"flex flex-col space-y-4 p-4 px-6",onSubmit:o[3]||(o[3]=(0,R.D$)(((...e)=>r.addEventLink&&r.addEventLink(...e)),["prevent"])),method:"POST"},[(0,l.Lk)("label",ie,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>n.linkData.link_name=e),class:"mt-2 px-3 py-3 bg-white border border-1 shadow-sm border-abbey-400 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-2xl sm:text-sm focus:ring-1",placeholder:"link title",required:""},null,512),[[R.Jo,n.linkData.link_name]])]),(0,l.Lk)("label",de,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>n.linkData.link=e),class:"mt-2 px-3 py-3 bg-white border border-1 shadow-sm border-abbey-400 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-2xl sm:text-sm focus:ring-1",placeholder:"Link",required:""},null,512),[[R.Jo,n.linkData.link]])]),(0,l.Lk)("label",ce,[(0,l.bo)((0,l.Lk)("select",{name:"participant_category",class:"mt-2 px-3 py-3 pr-4 bg-white border border-1 shadow-sm border-abbey-400 placeholder-slate-400 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-2xl sm:text-sm focus:ring-1","onUpdate:modelValue":o[2]||(o[2]=e=>n.linkData.access_level=e),required:""},he,512),[[R.u1,n.linkData.access_level]])]),ve],32)])])])):(0,l.Q3)("",!0)}var ke={components:{XCircleIcon:K.A,SpinnerComponent:I.A},data(){return{linkData:{link_name:"",link:"",access_level:"",event_id:""},isLoading:!1,message:""}},props:{show:{type:Boolean,required:!0},event_id:{type:Number,required:!0}},methods:{async addEventLink(){this.isLoading=!0,this.linkData.event_id=this.event_id;try{const e=await(0,A.wE)("events/add_event_link/",this.linkData);this.link_data=e,this.isLoading=!1,this.$emit("close")}catch(e){console.error("Error adding an event link:",e),this.isLoading=!1}},close(){this.$emit("close")}},watch:{show(e){document.body.style.overflow=e?"hidden":""}},mounted(){this.show&&(document.body.style.overflow="hidden")}};const xe=(0,Y.A)(ke,[["render",fe]]);var me=xe,ge={name:"EventView",components:{HeaderView:F.A,SpinnerComponent:I.A,MapPinIcon:M.A,CalendarDaysIcon:U.A,UserGroupIcon:X.A,EventResourceModal:oe,EventLinkModal:me},data(){return{headerTitle:"Event details",id:this.$route.params.id,isLoading:!0,event:{},resources:{},links:{},participants:[],appUrl:"https://events.ecsaconm.org",showParticipantModal:!1,currentPage:1,totalPages:"",pageSize:"10",apiUrl:"https://185.135.137.170:8080",searchPhrase:"",showResourceModal:!1,showLinkModal:!1}},mounted(){this.getEvent()},setup(){const e=(0,S.n)(),o=e.permissions;return{permissions:o}},methods:{async getEvent(){try{const e=await(0,A.Gk)("events",this.id,this.currentPage,this.pageSize,this.searchPhrase);this.event=e.event,this.participants=e.data,this.totalPages=e.pages,this.resources=e.resource_files,this.links=e.links,console.log(e),this.isLoading=!1}catch(e){console.error("Error fetching event:",e),this.isLoading=!1}},formatDate(e){const o=new Date(e);return o.toLocaleString("en-UK",{day:"2-digit",month:"2-digit",year:"numeric"})},openResourceUploadModal(){this.event_id=this.id,this.showResourceModal=!0},closeResourceUploadModal(){this.showResourceModal=!1},openLinkModal(){this.event_id=this.id,this.showLinkModal=!0},closeLinkModal(){this.showLinkModal=!1},getFullImageUrl(e){return`${this.apiUrl}/${e}`}}};const we=(0,Y.A)(ge,[["render",D]]);var ye=we},1310:function(e,o,t){t.d(o,{A:function(){return s}});var l=t(641);function s(e,o){return(0,l.uX)(),(0,l.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,l.Lk)("path",{"fill-rule":"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z","clip-rule":"evenodd"})])}},1709:function(e,o,t){t.d(o,{A:function(){return s}});var l=t(641);function s(e,o){return(0,l.uX)(),(0,l.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[(0,l.Lk)("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}}}]);
//# sourceMappingURL=959.2a5539f8.js.map